<!DOCTYPE html><meta charset=utf8><meta name=viewport content="width=device-width, user-scalable=0"><meta name=apple-mobile-web-app-capable content=yes><meta name=theme-color content=#000><title>Potato (opt)</title><style>body,html{cursor:grab;margin:0;overflow:hidden}canvas,main{height:100vh;overflow:hidden;position:absolute;touch-action:none;user-select:none;width:100vw;word-break:break-word}[onclick]{cursor:pointer}.grabbing{cursor:grabbing}</style><canvas id=scene></canvas><canvas id=billboard></canvas><main></main><script>(()=>{function t(t,i){let e=t.i.t();for(let n of i)n(t,e);return e}function i(t,i,e){let n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),n}function e(t,i,e){let n=i[0],s=i[1],o=i[2],r=i[3],h=i[4],c=i[5],a=i[6],u=i[7],l=i[8],f=i[9],d=i[10],v=i[11],m=i[12],p=i[13],w=i[14],_=i[15],M=e[0],x=e[1],T=e[2],g=e[3];return t[0]=M*n+x*h+T*l+g*m,t[1]=M*s+x*c+T*f+g*p,t[2]=M*o+x*a+T*d+g*w,t[3]=M*r+x*u+T*v+g*_,M=e[4],x=e[5],T=e[6],g=e[7],t[4]=M*n+x*h+T*l+g*m,t[5]=M*s+x*c+T*f+g*p,t[6]=M*o+x*a+T*d+g*w,t[7]=M*r+x*u+T*v+g*_,M=e[8],x=e[9],T=e[10],g=e[11],t[8]=M*n+x*h+T*l+g*m,t[9]=M*s+x*c+T*f+g*p,t[10]=M*o+x*a+T*d+g*w,t[11]=M*r+x*u+T*v+g*_,M=e[12],x=e[13],T=e[14],g=e[15],t[12]=M*n+x*h+T*l+g*m,t[13]=M*s+x*c+T*f+g*p,t[14]=M*o+x*a+T*d+g*w,t[15]=M*r+x*u+T*v+g*_,t}function n(t,i=[.9,.9,.9,1],e=16640){return(n,s)=>{n.i.o[s]|=1,n.i.h[s]={u:0,l:t,v:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p:[0,0,0],_:i,M:t.T,g:i,F:e}}}function s(t,i){let e=t.i.P[i],n=t.i.$[i];e.S&&(n.S[0]=e.S[0],n.S[1]=e.S[1],t.i.o[i]|=16),e.C&&(n.C=e.C,t.i.o[i]|=16)}function o(t,i){let e=t.i.I[i];t.X.Mouse0>10&&(e.Y[0]-=t.A.MouseX/R/2,e.Y[1]+=t.A.MouseY/R/2,t.i.o[i]|=16)}function r(t,i,e){return t[0]=i[0]+e[0],t[1]=i[1]+e[1],t}function h(t,i,e){return t[0]=i[0]*e,t[1]=i[1]*e,t}function c(t,i,e){let n=t.i.I[i],s=t.i.$[i];if(s.S[0]||s.S[1]){C[0]=s.S[0],C[1]=s.S[1];let i=Math.min(1,Math.hypot((o=C)[0],o[1]));(function(t,i,e){let n=i[0],s=i[1];t[0]=e[0]*n+e[2]*s,t[1]=e[1]*n+e[3]*s})(C,C,void 0!==n.k?t.i.I[n.k].R:n.i),function(t,i){let e=i[0],n=i[1],s=e*e+n*n;s>0&&(s=1/Math.sqrt(s)),t[0]=i[0]*s,t[1]=i[1]*s}(C,C),h(C,C,i*s.D*e),r(n.Y,n.Y,C),s.S[0]=0,s.S[1]=0}var o;s.C&&(n.C+=s.C*s.U*e,s.C=0)}function a(t=0,i=1){return((I=16807*I%2147483647)-1)/2147483646*(i-t)+t}function u(t,i){return(e,n)=>{e.i.o[n]|=128,e.i.V[n]={u:t,K:i,j:[0,0],W:[0,0]}}}function l(t,i,e){let n=t.i.I[i],s=t.i.V[i];if(1===s.u){let i=-t.q/2/R,e=-t.G/2/R;n.Y[1]<i&&(n.Y[1]=i,s.W[0]=a(-3,3),s.W[1]*=a(-2,-1)),n.Y[0]<e&&(n.Y[0]=e,s.W[0]*=-1),n.Y[0]>-e&&(n.Y[0]=-e,s.W[0]*=-1)}}function f(t,i,e){let n=t.i.I[i],s=t.i.V[i];if(1===s.u){s.W[1]+=-9.81*e,h(s.j,s.j,e),r(s.W,s.W,s.j),h(s.W,s.W,s.K);let c=[0,0];h(c,s.W,e),r(n.Y,n.Y,c),t.i.o[i]|=16,(o=s.j)[0]=0,o[1]=0}var o}function d(t,i){let e=t.L;t.N.useProgram(e.O),t.N.uniformMatrix4fv(e.B.m,!1,i.m),t.N.activeTexture(33984),t.N.bindTexture(g,t.H["spritesheet.png"]),t.N.uniform1i(e.B.J,0),t.N.bindBuffer(T,t.Z),t.N.bufferData(T,t.tt,35040),t.N.drawArraysInstanced(e.it,0,4,t.i.o.length)}function v(t,i,e,n){let s=Math.sin(e),o=Math.cos(e);return t[0]=o*n[0],t[1]=s*n[0],t[2]=-s*n[1],t[3]=o*n[1],t[4]=i[0],t[5]=i[1],t}function m(t,i,e){var n,s;if(t.o[i]&=-17,v(e.i,e.Y,e.C*X,e.et),void 0!==e.k&&(function(t,i,e){let n=i[0],s=i[1],o=i[2],r=i[3],h=i[4],c=i[5],a=e[0],u=e[1],l=e[2],f=e[3],d=e[4],v=e[5];t[0]=n*a+o*u,t[1]=s*a+r*u,t[2]=n*l+o*f,t[3]=s*l+r*f,t[4]=n*d+o*v+h,t[5]=s*d+r*v+c}(e.i,t.I[e.k].i,e.i),e.Gyroscope&&((n=Y)[0]=(s=e.i)[4],n[1]=s[5],v(e.i,Y,e.C*X,e.et))),function(t,i){let e=i[0],n=i[1],s=i[2],o=i[3],r=i[4],h=i[5],c=e*o-n*s;c&&(c=1/c,t[0]=o*c,t[1]=-n*c,t[2]=-s*c,t[3]=e*c,t[4]=(s*h-o*r)*c,t[5]=(n*r-e*h)*c)}(e.R,e.i),8&t.o[i]){let e=t.nt[i];for(let n=0;n<e.nt.length;n++){let s=e.nt[n];if(256&t.o[s]){let e=t.I[s];e.k=i,m(t,s,e)}}}}function p(t,i,e,n){let s=~~(6*t),o=6*t-s,r=e*(1-i),h=e*(1-o*i),c=e*(1-(1-o)*i);switch(s%6){case 0:return[e,c,r,n];case 1:return[h,e,r,n];case 2:return[r,e,c,n];case 3:return[r,h,e,n];case 4:return[c,r,e,n];default:return[e,r,h,n]}}function w(t,i,e=[1,1,1,1]){return(n,s)=>{let o=s*A;n.tt[o+6]=0,n.tt[o+7]=1,n.tt[o+8]=e[0],n.tt[o+9]=e[1],n.tt[o+10]=e[2],n.tt[o+11]=e[3],n.tt[o+12]=i[0],n.tt[o+13]=t[1]-i[1]-1,n.tt[o+14]=t[0],n.tt[o+15]=t[1],n.i.o[s]|=64,n.i.st[s]={ot:n.tt.subarray(o+6,o+8),rt:n.tt.subarray(o+8,o+12),ht:n.tt.subarray(o+12,o+16)}}}function _(t){return(i,e)=>{i.tt[e*A+6]=t}}function M(t=[0,0],i=0,e=[1,1]){return(n,s)=>{n.i.o[s]|=272,n.i.I[s]={i:n.tt.subarray(s*A,s*A+6),R:[1,0,0,1,0,0],Y:t,C:i,et:e,Gyroscope:!1}}}async function x(t,i){let e=await(n="../textures/"+i+".webp",new Promise((t=>{let i=new Image;i.src=n,i.onload=()=>t(i)})));var n;t.H[i]=function(t,i){let e=t.createTexture();return t.bindTexture(g,e),t.texImage2D(g,0,6408,6408,5121,i),t.generateMipmap(g),t.texParameteri(g,10241,9984),t.texParameteri(g,10240,9728),t.texParameteri(g,10242,10497),t.texParameteri(g,10243,10497),e}(t.N,e)}var T=34962,g=3553,y=5126,F=document.getElementById("update"),P=document.getElementById("delta"),b=document.getElementById("fps"),$=1/60,S=class extends class{constructor(t=1e4){this.o=[],this.ct=[],this.ut=t}t(){return this.ct.length>0?this.ct.pop():this.o.push(0)-1}lt(t){this.o[t]=0,this.ct.push(t)}}{constructor(){super(...arguments),this.h=[],this.P=[],this.ft=[],this.nt=[],this.$=[],this.st=[],this.V=[],this.I=[]}},C=[0,0],I=1,X=Math.PI/180,Y=[0,0],A=16,k=4*A,R=32,z=Float32Array.from([-.5,-.5,0,0,0,.5,-.5,0,1,0,-.5,.5,0,0,1,.5,.5,0,1,1]),D=new class extends class extends class{constructor(){this.dt=0,this.vt=0,this.G=window.innerWidth,this.q=window.innerHeight,this.wt=!0,this._t={MouseX:0,MouseY:0},this.A={MouseX:0,MouseY:0},this.X={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.Mt={},this.xt=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.Tt():this.gt())),this.xt.addEventListener("contextmenu",(t=>t.preventDefault())),this.xt.addEventListener("mousedown",(t=>{this._t["Mouse"+t.button]=1,this.A["Mouse"+t.button]=1})),this.xt.addEventListener("mouseup",(t=>{this._t["Mouse"+t.button]=0,this.A["Mouse"+t.button]=-1})),this.xt.addEventListener("mousemove",(t=>{this._t.MouseX=t.clientX,this._t.MouseY=t.clientY,this.A.MouseX=t.movementX,this.A.MouseY=t.movementY})),this.xt.addEventListener("wheel",(t=>{t.preventDefault(),this.A.WheelY=t.deltaY})),this.xt.addEventListener("touchstart",(t=>{t.target===this.xt&&t.preventDefault(),1===t.touches.length&&(this.Mt={});for(let i=0;i<t.touches.length;i++)this.Mt[t.touches[i].identifier]=i;for(let i=0;i<t.changedTouches.length;i++){let e=t.changedTouches[i],n=this.Mt[e.identifier];this._t["Touch"+n]=1,this._t[`Touch${n}X`]=e.clientX,this._t[`Touch${n}Y`]=e.clientY,this.A["Touch"+n]=1,this.A[`Touch${n}X`]=0,this.A[`Touch${n}Y`]=0}})),this.xt.addEventListener("touchmove",(t=>{t.target===this.xt&&t.preventDefault();for(let i=0;i<t.changedTouches.length;i++){let e=t.changedTouches[i],n=this.Mt[e.identifier];this.A[`Touch${n}X`]=e.clientX-this._t[`Touch${n}X`],this.A[`Touch${n}Y`]=e.clientY-this._t[`Touch${n}Y`],this._t[`Touch${n}X`]=e.clientX,this._t[`Touch${n}Y`]=e.clientY}})),this.xt.addEventListener("touchend",(t=>{t.target===this.xt&&t.preventDefault();for(let i=0;i<t.changedTouches.length;i++){let e=this.Mt[t.changedTouches[i].identifier];this._t["Touch"+e]=0,this.A["Touch"+e]=-1}})),this.xt.addEventListener("touchcancel",(t=>{for(let i=0;i<t.changedTouches.length;i++){let e=this.Mt[t.changedTouches[i].identifier];this._t["Touch"+e]=0,this.A["Touch"+e]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this._t[t.code]=1,this.A[t.code]=1)})),window.addEventListener("keyup",(t=>{this._t[t.code]=0,this.A[t.code]=-1}))}gt(){let t=0,i=performance.now(),e=n=>{let s=(n-i)/1e3;for(i=n,this.dt=requestAnimationFrame(e),this.yt(s),t+=s;t>=$;)t-=$,this.Ft($),this.Pt();this.bt(s),this.$t(s)};this.Tt(),e(i)}Tt(){cancelAnimationFrame(this.dt),this.dt=0}yt(t){this.vt=performance.now();let i=Math.abs(this.A.MouseX)+Math.abs(this.A.MouseY);this.X.Mouse+=i,1===this._t.Mouse0&&(this.X.Mouse0+=i),1===this._t.Mouse1&&(this.X.Mouse1+=i),1===this._t.Mouse2&&(this.X.Mouse2+=i),1===this._t.Touch0&&(this.X.Touch0+=Math.abs(this.A.Touch0X)+Math.abs(this.A.Touch0Y)),1===this._t.Touch1&&(this.X.Touch1+=Math.abs(this.A.Touch1X)+Math.abs(this.A.Touch1Y))}Ft(t){}bt(t){}Pt(){for(let t in this.A)this.A[t]=0}$t(t){this.wt=!1,-1===this.A.Mouse0&&(this.X.Mouse0=0),-1===this.A.Mouse1&&(this.X.Mouse1=0),-1===this.A.Mouse2&&(this.X.Mouse2=0),-1===this.A.Touch0&&(this.X.Touch0=0),-1===this.A.Touch1&&(this.X.Touch1=0);let i=performance.now()-this.vt;F&&(F.textContent=i.toFixed(1)),P&&(P.textContent=(1e3*t).toFixed(1)),b&&(b.textContent=(1/t).toFixed())}}{constructor(){super(),this.St=document.querySelector("#billboard"),this.Ct=this.St.getContext("2d"),this.It=document.querySelector("#scene"),this.N=this.It.getContext("webgl2"),this.Audio=new AudioContext,this.Xt=[],this.Yt={},this.N.enable(2929),this.N.enable(2884),this.N.blendFunc(770,771)}}{constructor(){super(),this.i=new S(50001),this.L=function(t){let e=function(t,e,n){let s=t.createProgram();return t.attachShader(s,i(t,35633,"#version 300 es\n\nuniform mat4 pv;\n\n\nin vec4 attr_position;\nin vec2 attr_texcoord;\n\n\nin vec4 attr_rotation; \nin vec4 attr_translation; \nin vec4 attr_color;\nin vec4 attr_sprite;\n\nout vec2 vert_texcoord;\nout vec4 vert_color;\nout vec4 vert_sprite;\n\nvoid main() {\nmat4 world = mat4(\nattr_rotation.xy, 0, 0,\nattr_rotation.zw, 0, 0,\n0, 0, 1, 0,\nattr_translation.xyz, 1\n);\n\nvec4 world_position = world * attr_position;\ngl_Position = pv * world_position;\nif (attr_translation.w == 0.0) {\ngl_Position.z = 2.0;\n}\n\nvert_texcoord = (attr_sprite.xy + attr_texcoord) / attr_sprite.zw;\nvert_color = attr_color;\n}\n")),t.attachShader(s,i(t,35632,"#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D sheet;\n\nin vec2 vert_texcoord;\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color * texture(sheet, vert_texcoord);\nif (frag_color.a == 0.0) {\ndiscard;\n}\n}\n")),t.linkProgram(s),s}(t);return{it:5,O:e,B:{m:t.getUniformLocation(e,"pv"),i:t.getUniformLocation(e,"world"),J:t.getUniformLocation(e,"sheet"),At:t.getAttribLocation(e,"attr_position"),kt:t.getAttribLocation(e,"attr_texcoord"),Rt:t.getAttribLocation(e,"attr_rotation"),zt:t.getAttribLocation(e,"attr_translation"),Dt:t.getAttribLocation(e,"attr_color"),Ut:t.getAttribLocation(e,"attr_sprite")}}}(this.N),this.H={},this.tt=new Float32Array(this.i.ut*A),this.Z=this.N.createBuffer(),this.N.pixelStorei(37440,!0);let t=this.L,e=this.N.createBuffer();this.N.bindBuffer(T,e),this.N.bufferData(T,z,35044),this.N.enableVertexAttribArray(t.B.At),this.N.vertexAttribPointer(t.B.At,3,y,!1,20,0),this.N.enableVertexAttribArray(t.B.kt),this.N.vertexAttribPointer(t.B.kt,2,y,!1,20,12),this.N.bindBuffer(T,this.Z),this.N.bufferData(T,this.i.ut*k,35040),this.N.enableVertexAttribArray(t.B.Rt),this.N.vertexAttribDivisor(t.B.Rt,1),this.N.vertexAttribPointer(t.B.Rt,4,y,!1,k,0),this.N.enableVertexAttribArray(t.B.zt),this.N.vertexAttribDivisor(t.B.zt,1),this.N.vertexAttribPointer(t.B.zt,4,y,!1,k,16),this.N.enableVertexAttribArray(t.B.Dt),this.N.vertexAttribDivisor(t.B.Dt,1),this.N.vertexAttribPointer(t.B.Dt,4,y,!1,k,32),this.N.enableVertexAttribArray(t.B.Ut),this.N.vertexAttribDivisor(t.B.Ut,1),this.N.vertexAttribPointer(t.B.Ut,4,y,!1,k,48)}Ft(t){!function(t,i){for(let i=0;i<t.i.o.length;i++)384==(384&t.i.o[i])&&l(t,i)}(this),function(t,i){for(let e=0;e<t.i.o.length;e++)384==(384&t.i.o[e])&&f(t,e,i)}(this,t),function(t,i){for(let i=0;i<t.i.o.length;i++)272==(272&t.i.o[i])&&m(t.i,i,t.i.I[i])}(this)}bt(t){!function(t,i){if(t.X.Mouse0>10){for(let i=0;i<t.i.o.length;i++)4==(4&t.i.o[i])&&o(t,i);document.body.classList.add("grabbing")}else-1===t.A.Mouse0&&document.body.classList.remove("grabbing")}(this),function(t,i){for(let i=0;i<t.i.o.length;i++)34==(34&t.i.o[i])&&s(t,i)}(this),function(t,i){for(let e=0;e<t.i.o.length;e++)304==(304&t.i.o[e])&&c(t,e,i)}(this,t),function(t,i){if(t.G==window.innerWidth&&t.q==window.innerHeight||(t.wt=!0),t.wt){t.G=t.It.width=t.St.width=window.innerWidth,t.q=t.It.height=t.St.height=window.innerHeight;for(let i=0;i<t.i.o.length;i++)if(1==(1&t.i.o[i])){let s=t.i.h[i];if(0==s.u&&1==s.l.u){s.l.Vt=t.q/R/2,function(t,i,e,n,s,o,r){let h=1/(s-e),c=1/(n-i),a=1/(o-r);t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*a,t[11]=0,t[12]=(s+e)*h,t[13]=(i+n)*c,t[14]=(r+o)*a,t[15]=1}((e=s.l).l,e.Vt,e.Vt*(n=t.G/t.q),-e.Vt,-e.Vt*n,e.Et,e.T),function(t,i){let e=i[0],n=i[1],s=i[2],o=i[3],r=i[4],h=i[5],c=i[6],a=i[7],u=i[8],l=i[9],f=i[10],d=i[11],v=i[12],m=i[13],p=i[14],w=i[15],_=e*h-n*r,M=e*c-s*r,x=e*a-o*r,T=n*c-s*h,g=n*a-o*h,y=s*a-o*c,F=u*m-l*v,P=u*p-f*v,b=u*w-d*v,$=l*p-f*m,S=l*w-d*m,C=f*w-d*p,I=_*C-M*S+x*$+T*b-g*P+y*F;I&&(I=1/I,t[0]=(h*C-c*S+a*$)*I,t[1]=(s*S-n*C-o*$)*I,t[2]=(m*y-p*g+w*T)*I,t[3]=(f*g-l*y-d*T)*I,t[4]=(c*b-r*C-a*P)*I,t[5]=(e*C-s*b+o*P)*I,t[6]=(p*x-v*y-w*M)*I,t[7]=(u*y-f*x+d*M)*I,t[8]=(r*S-h*b+a*F)*I,t[9]=(n*b-e*S-o*F)*I,t[10]=(v*g-m*x+w*_)*I,t[11]=(l*x-u*g-d*_)*I,t[12]=(h*P-r*$-c*F)*I,t[13]=(e*$-n*P+s*F)*I,t[14]=(m*M-v*T-p*_)*I,t[15]=(u*T-l*M+f*_)*I)}(e.Kt,e.l);break}}}var e,n}(this),function(t,i){t.Xt=[];for(let i=0;i<t.i.o.length;i++)if(257==(257&t.i.o[i])){let n=t.i.h[i];if(0!==n.u)throw Error("Only canvas cameras are supported.");let s=n.l,o=t.i.I[i];n.v[0]=o.R[0],n.v[1]=o.R[1],n.v[4]=o.R[2],n.v[5]=o.R[3],n.v[12]=o.R[4],n.v[13]=o.R[5],n.v[14]=-2,e(n.m,s.l,n.v),n.p[0]=o.i[4],n.p[1]=o.i[5],n.p[2]=2,t.Xt.push(i)}}(this),function(t,i){for(let i=0;i<t.i.o.length;i++){let e=i*A+7;64&t.i.o[i]?0==t.tt[e]&&(t.tt[e]=1):1==t.tt[e]&&(t.tt[e]=0)}for(let i of t.Xt){let e=t.i.h[i];0===e.u&&(t.N.bindFramebuffer(36160,null),t.N.viewport(0,0,t.G,t.q),t.N.clearColor(...e.g),t.N.clear(e.F),d(t,e))}}(this)}};window.game=D,Promise.all([x(D,"checker1.png"),x(D,"spritesheet.png")]).then((()=>{!function(i){i.i=new S(50001),i.wt=!0,t(i,[M([0,0]),n({u:1,Vt:5,Et:1,T:3,l:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Kt:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),(t,i)=>{t.i.o[i]|=4,t.i.ft[i]={}}]);let e=5e3;for(let n=0;n<e;n++)t(i,[M([a(-10,-3),a(10,100)],0),w([8,8],[0,0],p(a(.1,.2),.5,1,1)),_(1-n/e),u(1,a(.98,.99))]),t(i,[M([a(3,10),a(10,100)],0),w([8,8],[1,0],p(a(.1,.2),.5,1,1)),_(1-n/e),u(1,a(.98,.99))])}(D),D.gt()}))})();
</script>
