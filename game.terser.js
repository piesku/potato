(()=>{function t(t,n){var i=""+t.__state.conversionName,e=Math.round(t.r),o=Math.round(t.g),r=Math.round(t.b),s=t.a,a=Math.round(t.h),u=t.s.toFixed(1),c=t.v.toFixed(1);if(n||"THREE_CHAR_HEX"===i||"SIX_CHAR_HEX"===i){for(var h=t.hex.toString(16);h.length<6;)h="0"+h;return"#"+h}return"CSS_RGB"===i?"rgb("+e+","+o+","+r+")":"CSS_RGBA"===i?"rgba("+e+","+o+","+r+","+s+")":"HEX"===i?"0x"+t.hex.toString(16):"RGB_ARRAY"===i?"["+e+","+o+","+r+"]":"RGBA_ARRAY"===i?"["+e+","+o+","+r+","+s+"]":"RGB_OBJ"===i?"{r:"+e+",g:"+o+",b:"+r+"}":"RGBA_OBJ"===i?"{r:"+e+",g:"+o+",b:"+r+",a:"+s+"}":"HSV_OBJ"===i?"{h:"+a+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===i?"{h:"+a+",s:"+u+",v:"+c+",a:"+s+"}":"unknown format"}function n(t,n,i){Object.defineProperty(t,n,{get:function(){return"RGB"===this.__state.space||Gt.recalculateRGB(this,n,i),this.__state[n]},set:function(t){"RGB"!==this.__state.space&&(Gt.recalculateRGB(this,n,i),this.__state.space="RGB"),this.__state[n]=t}})}function i(t,n){Object.defineProperty(t,n,{get:function(){return"HSV"===this.__state.space||Gt.recalculateHSV(this),this.__state[n]},set:function(t){"HSV"!==this.__state.space&&(Gt.recalculateHSV(this),this.__state.space="HSV"),this.__state[n]=t}})}function e(t){if("0"===t||At.isUndefined(t))return 0;var n=t.match(Pt);return At.isNull(n)?0:parseFloat(n[1])}function o(t){var n=""+t;return n.indexOf(".")>-1?n.length-n.indexOf(".")-1:0}function r(t,n,i,e,o){return e+(t-n)/(i-n)*(o-e)}function s(t,n,i,e){t.style.background="",At.each(Kt,(function(o){t.style.cssText+="background: "+o+"linear-gradient("+n+", "+i+" 0%, "+e+" 100%); "}))}function a(t,n,i){var e=document.createElement("li");return n&&e.appendChild(n),i?t.__ul.insertBefore(e,i):t.__ul.appendChild(e),t.onResize(),e}function u(t){Xt.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&Xt.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function c(t,n){var i=t.__preset_select[t.__preset_select.selectedIndex];i.innerHTML=n?i.value+"*":i.value}function h(t,n){var i=t.getRoot(),e=i.__rememberedObjects.indexOf(n.object);if(-1!==e){var o=i.__rememberedObjectIndecesToControllers[e];if(void 0===o&&(i.__rememberedObjectIndecesToControllers[e]=o={}),o[n.property]=n,i.load&&i.load.remembered){var r=i.load.remembered,s=void 0;if(r[t.preset])s=r[t.preset];else{if(!r.t)return;s=r.t}if(s[e]&&void 0!==s[e][n.property]){var a=s[e][n.property];n.initialValue=a,n.setValue(a)}}}}function l(t,n,i,e){if(void 0===n[i])throw Error('Object "'+n+'" has no property "'+i+'"');var o=void 0;if(e.color)o=new Qt(n,i);else{var r=[n,i].concat(e.factoryArgs);o=Zt.apply(t,r)}e.before instanceof It&&(e.before=e.before.__li),h(t,o),Xt.addClass(o.domElement,"c");var s=document.createElement("span");Xt.addClass(s,"property-name"),s.innerHTML=o.property;var u=document.createElement("div");u.appendChild(s),u.appendChild(o.domElement);var d=a(t,u,e.before);return Xt.addClass(d,cn.i),Xt.addClass(d,o instanceof Qt?"color":Ot(o.getValue())),function(t,n,i){if(i.__li=n,i.__gui=t,At.extend(i,{options:function(n){if(arguments.length>1){var e=i.__li.nextElementSibling;return i.remove(),l(t,i.object,i.property,{before:e,factoryArgs:[At.toArray(arguments)]})}if(At.isArray(n)||At.isObject(n)){var o=i.__li.nextElementSibling;return i.remove(),l(t,i.object,i.property,{before:o,factoryArgs:[n]})}},name:function(t){return i.__li.firstElementChild.firstElementChild.innerHTML=t,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof Lt){var e=new Ut(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});At.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var n=i[t],o=e[t];i[t]=e[t]=function(){var t=Array.prototype.slice.call(arguments);return o.apply(e,t),n.apply(i,t)}})),Xt.addClass(n,"has-slider"),i.domElement.insertBefore(e.domElement,i.domElement.firstElementChild)}else if(i instanceof Ut){var o=function(n){if(At.isNumber(i.__min)&&At.isNumber(i.__max)){var e=i.__li.firstElementChild.firstElementChild.innerHTML,o=i.__gui.__listening.indexOf(i)>-1;i.remove();var r=l(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]});return r.name(e),o&&r.listen(),r}return n};i.min=At.compose(o,i.min),i.max=At.compose(o,i.max)}else i instanceof Yt?(Xt.bind(n,"click",(function(){Xt.fakeEvent(i.__checkbox,"click")})),Xt.bind(i.__checkbox,"click",(function(t){t.stopPropagation()}))):i instanceof Wt?(Xt.bind(n,"click",(function(){Xt.fakeEvent(i.__button,"click")})),Xt.bind(n,"mouseover",(function(){Xt.addClass(i.__button,"hover")})),Xt.bind(n,"mouseout",(function(){Xt.removeClass(i.__button,"hover")}))):i instanceof Qt&&(Xt.addClass(n,"color"),i.updateDisplay=At.compose((function(t){return n.style.borderLeftColor=""+i.__color,t}),i.updateDisplay),i.updateDisplay());i.setValue=At.compose((function(n){return t.getRoot().__preset_select&&i.isModified()&&c(t.getRoot(),!0),n}),i.setValue)}(t,d,o),t.__controllers.push(o),o}function d(t,n){return document.location.href+"."+n}function f(t,n,i){var e=document.createElement("option");e.innerHTML=n,e.value=n,t.__preset_select.appendChild(e),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function g(t,n){n.style.display=t.useLocalStorage?"block":"none"}function p(t){var n=t.__save_row=document.createElement("li");Xt.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),Xt.addClass(n,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",Xt.addClass(i,"button gears");var e=document.createElement("span");e.innerHTML="Save",Xt.addClass(e,"button"),Xt.addClass(e,"save");var o=document.createElement("span");o.innerHTML="New",Xt.addClass(o,"button"),Xt.addClass(o,"save-as");var r=document.createElement("span");r.innerHTML="Revert",Xt.addClass(r,"button"),Xt.addClass(r,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?At.each(t.load.remembered,(function(n,i){f(t,i,i===t.preset)})):f(t,nn,!1),Xt.bind(s,"change",(function(){for(var n=0;n<t.__preset_select.length;n++)t.__preset_select[n].innerHTML=t.__preset_select[n].value;t.preset=this.value})),n.appendChild(s),n.appendChild(i),n.appendChild(e),n.appendChild(o),n.appendChild(r),en){var a=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(d(0,"isLocal"))&&u.setAttribute("checked","checked"),g(t,a),Xt.bind(u,"change",(function(){t.useLocalStorage=!t.useLocalStorage,g(t,a)}))}var c=document.getElementById("dg-new-constructor");Xt.bind(c,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||on.hide()})),Xt.bind(i,"click",(function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),on.show(),c.focus(),c.select()})),Xt.bind(e,"click",(function(){t.save()})),Xt.bind(o,"click",(function(){var n=prompt("Enter a new preset name.");n&&t.saveAs(n)})),Xt.bind(r,"click",(function(){t.revert()}))}function w(t,n){t.domElement.style.width=n+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=n+"px"),t.__closeButton&&(t.__closeButton.style.width=n+"px")}function v(t,n){var i={};return At.each(t.__rememberedObjects,(function(e,o){var r={};At.each(t.__rememberedObjectIndecesToControllers[o],(function(t,i){r[i]=n?t.initialValue:t.getValue()})),i[o]=r})),i}function m(t){0!==t.length&&qt.call(window,(function(){m(t)})),At.each(t,(function(t){t.updateDisplay()}))}function b(t,n){let i=t.u.o();for(let e of n)e(t,i);return i}function k(t,n,i,e){let o=Math.sin(i),r=Math.cos(i);return t[0]=r*e[0],t[1]=o*e[0],t[2]=-o*e[1],t[3]=r*e[1],t[4]=n[0],t[5]=n[1],t}function y(t,n){return t[0]=n[4],t[1]=n[5],t}function x(t,n,i){let e=n[0],o=n[1];return t[0]=i[0]*e+i[2]*o+i[4],t[1]=i[1]*e+i[3]*o+i[5],t}function _(...t){return(n,i)=>{128&n.u.l[i]||(n.u.l[i]|=128,n.u.p[i]={p:[]});let e=n.u.p[i].p;for(let i of t){let t=b(n,i);e.push(t)}}}function A(t,n){if(128&t.l[n])for(let i of t.p[n].p)A(t,i);t.m(n)}function z(t,n,i){let e=t.createShader(n);return t.shaderSource(e,i),t.compileShader(e),e}function S(t,n=[1,1,1,1]){let i="../assets/"+t+".png";return(t,e)=>{let o=e*bi;t.k[o+6]=(e-0)/(t.u._-0)*-1+1,t.k[o+7]=1,t.k[o+8]=n[0],t.k[o+9]=n[1],t.k[o+10]=n[2],t.k[o+11]=n[3],t.k[o+12]=ei[i].x,t.k[o+13]=ei[i].y,t.k[o+14]=ei[i].width,t.k[o+15]=ei[i].height,t.u.l[e]|=2048,t.u.A[e]={S:t.k.subarray(o+6,o+8),R:t.k.subarray(o+8,o+12),M:t.k.subarray(o+12,o+16)}}}function R(t){return(n,i)=>{n.k[i*bi+6]=t}}function M(t,n,i){let e="../assets/"+i+".png",o=n*bi;t.k[o+12]=ei[e].x,t.k[o+13]=ei[e].y,t.k[o+14]=ei[e].width,t.k[o+15]=ei[e].height}function E(t,n,i){let e=n*bi;t.k[e+8]=i[0],t.k[e+9]=i[1],t.k[e+10]=i[2],t.k[e+11]=i[3]}function F(t,n,i){let e=t.u.F[n];for(let i in e.O)if(e.C<e.O[i]){M(t,n,i);break}e.C+=i,e.C>=e.T&&(e.C-=e.T)}function O(t,n,i){let e=n[0],o=n[1],r=n[2],s=n[3],a=n[4],u=n[5],c=n[6],h=n[7],l=n[8],d=n[9],f=n[10],g=n[11],p=n[12],w=n[13],v=n[14],m=n[15],b=i[0],k=i[1],y=i[2],x=i[3];return t[0]=b*e+k*a+y*l+x*p,t[1]=b*o+k*u+y*d+x*w,t[2]=b*r+k*c+y*f+x*v,t[3]=b*s+k*h+y*g+x*m,b=i[4],k=i[5],y=i[6],x=i[7],t[4]=b*e+k*a+y*l+x*p,t[5]=b*o+k*u+y*d+x*w,t[6]=b*r+k*c+y*f+x*v,t[7]=b*s+k*h+y*g+x*m,b=i[8],k=i[9],y=i[10],x=i[11],t[8]=b*e+k*a+y*l+x*p,t[9]=b*o+k*u+y*d+x*w,t[10]=b*r+k*c+y*f+x*v,t[11]=b*s+k*h+y*g+x*m,b=i[12],k=i[13],y=i[14],x=i[15],t[12]=b*e+k*a+y*l+x*p,t[13]=b*o+k*u+y*d+x*w,t[14]=b*r+k*c+y*f+x*v,t[15]=b*s+k*h+y*g+x*m,t}function C(t,n=[.9,.9,.9,1],i=16640){return(e,o)=>{e.u.l[o]|=2,e.u.B[o]={j:0,D:t,G:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H:[0,0,0],P:n,X:t.Y,N:n,V:i}}}function T(t,n){return t[0]=n[0],t[1]=n[1],t}function B(t,n,i){return t[0]=n[0]+i[0],t[1]=n[1]+i[1],t}function j(t,n,i){return t[0]=n[0]-i[0],t[1]=n[1]-i[1],t}function D(t,n,i){return t[0]=n[0]*i,t[1]=n[1]*i,t}function G(t,n){let i=n[0],e=n[1],o=i*i+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t}function I(t,n){return t[0]*n[0]+t[1]*n[1]}function H(t,n){let i=n[0]-t[0],e=n[1]-t[1];return i*i+e*e}function P(t,n,i,e){j(si,i,n),j(ai,e,n),j(ui,e,i);let o=I(ai,si);if(o<=0)o=0,T(t,n);else{let e=I(si,si);o>=e?(o=1,T(t,i)):(o/=e,D(t,si,o),B(t,t,n))}return o}function X(t,n){let i=t.u.J[n],e=t.u.U[n];i.L&&(e.L[0]=i.L[0],e.L[1]=i.L[1],t.u.l[n]|=256),i.W&&(e.W=i.W,t.u.l[n]|=256)}function Y(t,n){let i=t.u.K[n];t.$.Mouse0>5&&(i.Z[0]-=t.q.MouseX/t.tt,i.Z[1]+=t.q.MouseY/t.tt,t.u.l[n]|=256)}function N(t=0,n=1){return~~(Math.random()*(n-t+1)+t)}function V(t=0,n=1){return Math.random()*(n-t)+t}function J(t,n){return(i,e)=>{i.u.l[e]|=64,i.u.nt[e]={j:t,it:n}}}function U(t,n){let i=t.u.nt[n],e=t.u.et[n],o=t.u.ot[n],r=t.u.K[n];if(null===e.rt)return;let s=t.u.st[e.rt];if(i.it&s.ut){if(i.it&=~s.ut,e.ct&=~s.ut,t.u.l[n]|=256,o.ht[0]=0,o.ht[1]=0,2&s.ut){switch(E(t,n,[1,1,1,1]),i.j){case 0:4&i.it?M(t,n,"ziemniak_ugotowany"):(M(t,n,"ziemniak_obrany_ugotowany"),i.it|=8);break;case 1:4&i.it?M(t,n,"marchewka_ugotowana"):(M(t,n,"marchewka_obrana_ugotowana"),i.it|=8);break;case 2:M(t,n,"groszek_ugotowany"),i.it|=4}return}if(4&s.ut){switch(E(t,n,[1,1,1,1]),i.j){case 0:2&i.it?M(t,n,"ziemniak_obrany"):(M(t,n,"ziemniak_obrany_ugotowany"),i.it|=8);break;case 1:2&i.it?M(t,n,"marchewka_obrana"):(M(t,n,"marchewka_obrana_ugotowana"),i.it|=8);break;case 2:M(t,n,"groszek_obrany"),i.it|=16,r.lt[0]=.5,r.lt[1]=.5;break;case 3:M(t,n,"jablko_obrane"),i.it|=8}let e=t.u.K[s.ft].dt;return void 0!==e&&y(r.Z,t.u.K[t.u.p[e].p[0]].u),void(o.gt[0]=300)}if(8&s.ut){switch(E(t,n,[1,1,1,1]),i.j){case 0:M(t,n,"ziemniak_kawalek"+N(1,2)),i.it|=16;break;case 1:M(t,n,"marchewka_kawalek"+N(1,2)),i.it|=16;break;case 3:M(t,n,"jablko_kawalek"+N(1,2)),i.it|=16}let a=t.u.K[s.ft].dt;return void 0!==a&&y(r.Z,t.u.K[t.u.p[a].p[0]].u),r.lt[0]=.5,r.lt[1]=.5,o.gt[0]=V(-200,200),void(e.wt=.5)}16&s.ut&&(t.u.l[n]&=-4097,t.u.l[n]&=-5)}else s.ut>1&&(o.gt[0]=V(-200,200),o.gt[1]=V(200,300))}function L(t,n,i){let e=t.u.K[n],o=t.u.U[n];if(o.L[0]||o.L[1]){fi[0]=o.L[0],fi[1]=o.L[1];let n=Math.min(1,Math.hypot((r=fi)[0],r[1]));(function(t,n,i){let e=n[0],o=n[1];t[0]=i[0]*e+i[2]*o,t[1]=i[1]*e+i[3]*o})(fi,fi,void 0!==e.dt?t.u.K[e.dt].vt:e.u),G(fi,fi),D(fi,fi,n*o.bt*i),B(e.Z,e.Z,fi),o.L[0]=0,o.L[1]=0}var r;o.W&&(e.W+=o.W*o.kt*i,o.W=0)}function W(t,n){return(i,e)=>{i.u.l[e]|=4096,i.u.ot[e]={j:t,yt:n,gt:[0,0],xt:[0,0],ht:[0,0],_t:V(-180,180)}}}function Q(t,n,i){let e=t.u.K[n],o=t.u.ot[n];if(1===o.j){let n=-t.At/t.tt/2,i=-t.zt/t.tt/2;e.Z[1]<n&&(e.Z[1]=n,o.ht[0]=V(-3,3),o.ht[1]*=-1*t.physicsBounce),e.Z[0]<i&&(e.Z[0]=i,o.ht[0]*=-1),e.Z[0]>-i&&(e.Z[0]=-i,o.ht[0]*=-1)}}function K(t,n,i){let e=t.u.K[n],o=t.u.ot[n];if(1===o.j){T(o.xt,o.ht),o.xt[1]-=t.physicsGravity*i,D(o.gt,o.gt,i),B(o.xt,o.xt,o.gt),D(o.xt,o.xt,1-t.physicsFriction-o.yt);let s=[0,0];D(s,o.xt,i),B(e.Z,e.Z,s),e.W+=o._t*i,t.u.l[n]|=256,(r=o.gt)[0]=0,r[1]=0}var r}function $(t,n){let i=t.u.K[n],e=t.u.ot[n],o=t.u.et[n];if(1===e.j)if(null!==o.rt&&4096&t.u.l[o.rt]){D(gi,o.St,o.Rt),B(i.Z,i.Z,gi),t.u.l[n]|=256;let r=I(e.xt,o.St);D(pi,o.St,-r*t.physicsBounce),B(e.ht,e.xt,pi)}else T(e.ht,e.xt)}function Z(t,n){let i=t.Mt,e=t.Et["spritesheet.png"];t.Ft.useProgram(i.Ot),t.Ft.uniformMatrix4fv(i.Ct.I,!1,n.I),t.Ft.activeTexture(33984),t.Ft.bindTexture(dn,e.Tt),t.Ft.uniform1i(i.Ct.Bt,0),t.Ft.uniform2f(i.Ct.jt,e.Dt,e.Gt),t.Ft.bindBuffer(ln,t.It),t.Ft.bufferData(ln,t.k,35040),t.Ft.drawArraysInstanced(i.Ht,0,4,t.u.l.length)}function q(t,n,i){return{j:1,wt:t,Pt:n,Y:i,D:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Xt:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}function tt(t,n){let i=t.u.Yt[n],e=t.u.K[n];e.Z[0]=(Math.random()-.5)*i.Nt[0]*2,e.Z[1]=(Math.random()-.5)*i.Nt[1]*2,t.u.l[n]|=256}function nt(t,n,i){let e=t.u.Vt[n];if(e.Jt+=i,!(e.Counter>t.spawnCount)&&e.Jt>t.spawnInterval){e.Jt=0;let i=[0,0];y(i,t.u.K[n].u),t.u.l.length-t.u.Ut.length<t.u._?b(t,[...e.Lt(t),st(i,0)]):(alert(`The world is full! You've reached the maximum number of entities allowed in the game (${t.u._}). Press OK to restart the simulation.`),t.Wt())}}function it(t,n){for(let n=0;n<t.u.l.length;n++)33024==(33024&t.u.l[n])&&et(t.u,n,t.u.K[n])}function et(t,n,i){if(t.l[n]&=-257,k(i.u,i.Z,i.W*wi,i.lt),void 0!==i.dt&&(function(t,n,i){let e=n[0],o=n[1],r=n[2],s=n[3],a=n[4],u=n[5],c=i[0],h=i[1],l=i[2],d=i[3],f=i[4],g=i[5];t[0]=e*c+r*h,t[1]=o*c+s*h,t[2]=e*l+r*d,t[3]=o*l+s*d,t[4]=e*f+r*g+a,t[5]=o*f+s*g+u}(i.u,t.K[i.dt].u,i.u),i.Gyroscope&&(y(vi,i.u),k(i.u,vi,i.W*wi,i.lt))),function(t,n){let i=n[0],e=n[1],o=n[2],r=n[3],s=n[4],a=n[5],u=i*r-e*o;u&&(u=1/u,t[0]=r*u,t[1]=-e*u,t[2]=-o*u,t[3]=i*u,t[4]=(o*a-r*s)*u,t[5]=(e*s-i*a)*u)}(i.vt,i.u),128&t.l[n]){let i=t.p[n];for(let e=0;e<i.p.length;e++){let o=i.p[e];if(32768&t.l[o]){let i=t.K[o];i.dt=n,et(t,o,i)}}}}function ot(t,...n){return t.reduce(((t,i)=>t+function(t){let n=t.shift();return"boolean"==typeof n||null==n?"":Array.isArray(n)?n.join(""):n}(n)+i))}function rt(t,n){let i=function(t){return"play"===t.Qt?"":ot` <div
style="
font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
font-size: 5vmin;
color: white;
padding: 5vmin;
"
>
<h1
style="margin: 0;
text-shadow:
2px 2px 0 orange,
4px 4px 0 green,
6px 6px 0 indigo;
"
>
Super Simple Salad Simulator
</h1>
<p style="text-shadow: 2px 2px 0 green;">
Discover the recipe for the tasty springtime treat: the veggy salad! Cut the green peas
and cook the apples â€” or is it the other way around? Experiment to find out!
</p>
<p style="text-shadow: 2px 2px 0 orange;">
Move objects by grabbing them with the mouse, rotate them with the mouse wheel.
</p>
<h2 onclick="playNow();" style="text-shadow: 2px 2px 0 yellow;">Play Now!</h2>
</div>`}(t);i!==kn&&(t.Kt.innerHTML=kn=i)}function st(t=[0,0],n=0,i=[1,1]){return(e,o)=>{e.u.l[o]|=33024,e.u.K[o]={u:e.k.subarray(o*bi,o*bi+6),vt:[1,0,0,1,0,0],Z:t,W:n,lt:i,Gyroscope:!1}}}function at(t,n){return(i,e)=>{i.u.l[e]|=4,i.u.et[e]={ft:e,ct:n,wt:t/2,$t:[0,0],rt:null,St:[0,0],Rt:0}}}function ut(t,n,i=0){return(e,o)=>{e.u.l[o]|=8,e.u.st[o]={ft:o,ut:t,wt:n/2,Zt:i,$t:[0,0],qt:[0,0],tn:[0,0]}}}function ct(t){return[S("deska1"),ut(1,1,-.65),W(0,1),(t,n)=>{t.u.l[n]|=512}]}function ht(t){return(n,i)=>{n.u.l[i]|=8192,n.u.Yt[i]={Nt:t}}}function lt(t,n){return(i,e)=>{i.u.l[e]|=16384,i.u.Vt[e]={Lt:t,Counter:n,Jt:0}}}function dt(t){return t.nn++,[S("jablko_surowe"),J(3,4),at(1,31),W(1,V(.01,.001))]}function ft(t){return[(t,n)=>{t.u.l[n]|=512},_([st(),S("miska"),R(0)],[st(),S("miska_front"),R(1)],[st([-.4,0]),ut(1,.2,.4),W(0,1)],[st([.4,0]),ut(1,.2,.4),W(0,1)],[st([0,-.1]),ut(16,.5,-.5)])]}function gt(t){return t.nn++,[S("marchewka_surowa"),J(1,6),at(1,31),W(1,V(.01,.001))]}function pt(t){let n=0;for(let i in t)n=t[i]=n+t[i];return(i,e)=>{i.u.l[e]|=1,i.u.F[e]={O:t,T:n,C:0}}}function wt(t){return[S("garnek2_front"),R(1),(t,n)=>{t.u.l[n]|=512},_([st(),S("garnek21"),R(0),pt({garnek21:.1,garnek22:.1,garnek23:.1,garnek24:.1})],[st([-.4,0]),ut(1,.2,.4),W(0,1)],[st([.4,0]),ut(1,.2,.4),W(0,1)],[st([0,-.2]),ut(2,.5,-.5)])]}function vt(t){return t.nn++,[S("groszek_surowy"),J(2,2),at(1,31),W(1,V(.01,.001))]}function mt(t){return[(t,n)=>{t.u.l[n]|=512},_([st([.25,-.25])],[st(),ht([.001,.01]),S("obieraczka"),R(0)],[st(),ht([.001,.01]),S("obieraczka_front"),R(1)],[st([0,-.2]),ut(4,1)],[st([-.2,0]),ut(1,.3,.5),W(0,1)],[st([.2,.1]),ut(1,.3,.3),W(0,1)])]}function bt(t,n,i,e){let o=~~(6*t),r=6*t-o,s=i*(1-n),a=i*(1-r*n),u=i*(1-(1-r)*n);switch(o%6){case 0:return[i,u,s,e];case 1:return[a,i,s,e];case 2:return[s,i,u,e];case 3:return[s,a,i,e];case 4:return[u,s,i,e];default:return[i,s,a,e]}}function kt(t){return t.nn++,[S("ziemniak_surowy",bt(V(.1,.15),V(0,.5),V(.5,1),1)),J(0,6),at(1,31),W(1,V(.01,.001))]}var yt=Object.defineProperty,xt=Array.prototype.forEach,_t=Array.prototype.slice,At={en:{},extend:function(t){return this.each(_t.call(arguments,1),(function(n){(this.isObject(n)?Object.keys(n):[]).forEach(function(i){this.isUndefined(n[i])||(t[i]=n[i])}.bind(this))}),this),t},defaults:function(t){return this.each(_t.call(arguments,1),(function(n){(this.isObject(n)?Object.keys(n):[]).forEach(function(i){this.isUndefined(t[i])&&(t[i]=n[i])}.bind(this))}),this),t},compose:function(){var t=_t.call(arguments);return function(){for(var n=_t.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(t,n,i){if(t)if(xt&&t.forEach&&t.forEach===xt)t.forEach(n,i);else if(t.length===t.length+0){var e,o=void 0;for(o=0,e=t.length;o<e;o++)if(o in t&&n.call(i,t[o],o)===this.en)return}else for(var r in t)if(n.call(i,t[r],r)===this.en)return},defer:function(t){setTimeout(t,0)},debounce:function(t,n,i){var e=void 0;return function(){function o(){e=null,i||t.apply(r,s)}var r=this,s=arguments,a=i||!e;clearTimeout(e),e=setTimeout(o,n),a&&t.apply(r,s)}},toArray:function(t){return t.toArray?t.toArray():_t.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return""+t},n}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},zt=[{litmus:At.isString,conversions:{on:{read:function(t){var n=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==n&&{space:"HEX",hex:parseInt("0x"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3],0)}},write:t},rn:{read:function(t){var n=t.match(/^#([A-F0-9]{6})$/i);return null!==n&&{space:"HEX",hex:parseInt("0x"+n[1],0)}},write:t},sn:{read:function(t){var n=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==n&&{space:"RGB",r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3])}},write:t},an:{read:function(t){var n=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==n&&{space:"RGB",r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:parseFloat(n[4])}},write:t}}},{litmus:At.isNumber,conversions:{un:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:At.isArray,conversions:{cn:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},hn:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:At.isObject,conversions:{ln:{read:function(t){return!!(At.isNumber(t.r)&&At.isNumber(t.g)&&At.isNumber(t.b)&&At.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},dn:{read:function(t){return!!(At.isNumber(t.r)&&At.isNumber(t.g)&&At.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},fn:{read:function(t){return!!(At.isNumber(t.h)&&At.isNumber(t.s)&&At.isNumber(t.v)&&At.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},gn:{read:function(t){return!!(At.isNumber(t.h)&&At.isNumber(t.s)&&At.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],St=void 0,Rt=void 0,Mt=function(){Rt=!1;var t=arguments.length>1?At.toArray(arguments):arguments[0];return At.each(zt,(function(n){if(n.litmus(t))return At.each(n.conversions,(function(n,i){if(St=n.read(t),!1===Rt&&!1!==St)return Rt=St,St.conversionName=i,St.conversion=n,At.en})),At.en})),Rt},Et=void 0,Ft={hsv_to_rgb:function(t,n,i){var e=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),r=i*(1-n),s=i*(1-o*n),a=i*(1-(1-o)*n),u=[[i,a,r],[s,i,r],[r,i,a],[r,s,i],[a,r,i],[i,r,s]][e];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,n,i){var e=Math.min(t,n,i),o=Math.max(t,n,i),r=o-e,s=void 0;return 0===o?{h:NaN,s:0,v:0}:(s=t===o?(n-i)/r:n===o?2+(i-t)/r:4+(t-n)/r,(s/=6)<0&&(s+=1),{h:360*s,s:r/o,v:o/255})},rgb_to_hex:function(t,n,i){var e=this.hex_with_component(0,2,t);return e=this.hex_with_component(e,1,n),this.hex_with_component(e,0,i)},component_from_hex:function(t,n){return t>>8*n&255},hex_with_component:function(t,n,i){return i<<(Et=8*n)|t&~(255<<Et)}},Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Tt=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),Bt=function t(n,i,e){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,i);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:t(r,i,e)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(e):void 0},jt=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Dt=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},Gt=function(){function n(){if(Ct(this,n),this.__state=Mt.apply(this,arguments),!1===this.__state)throw Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Tt(n,[{key:"toString",value:function(){return t(this)}},{key:"toHexString",value:function(){return t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();Gt.recalculateRGB=function(t,n,i){if("HEX"===t.__state.space)t.__state[n]=Ft.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw Error("Corrupted color state");At.extend(t.__state,Ft.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},Gt.recalculateHSV=function(t){var n=Ft.rgb_to_hsv(t.r,t.g,t.b);At.extend(t.__state,{s:n.s,v:n.v}),At.isNaN(n.h)?At.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h},Gt.pn=["r","g","b","h","s","v","hex","a"],n(Gt.prototype,"r",2),n(Gt.prototype,"g",1),n(Gt.prototype,"b",0),i(Gt.prototype,"h"),i(Gt.prototype,"s"),i(Gt.prototype,"v"),Object.defineProperty(Gt.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(Gt.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=Ft.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var It=function(){function t(n,i){Ct(this,t),this.initialValue=n[i],this.domElement=document.createElement("div"),this.object=n,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return Tt(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),Ht={};At.each({wn:["change"],vn:["click","mousemove","mousedown","mouseup","mouseover"],mn:["keydown"]},(function(t,n){At.each(t,(function(t){Ht[t]=n}))}));var Pt=/(\d+(\.\d+)?)px/,Xt={makeSelectable:function(t,n){void 0!==t&&void 0!==t.style&&(t.onselectstart=n?function(){return!1}:function(){},t.style.MozUserSelect=n?"auto":"none",t.style.bn=n?"auto":"none",t.unselectable=n?"on":"off")},makeFullscreen:function(t,n,i){var e=i,o=n;At.isUndefined(o)&&(o=!0),At.isUndefined(e)&&(e=!0),t.style.position="absolute",o&&(t.style.left=0,t.style.right=0),e&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,n,i,e){var o=i||{},r=Ht[n];if(!r)throw Error("Event type "+n+" not supported.");var s=document.createEvent(r);switch(r){case"MouseEvents":s.initMouseEvent(n,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,o.x||o.clientX||0,o.y||o.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var a=s.initKeyboardEvent||s.initKeyEvent;At.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(n,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:s.initEvent(n,o.bubbles||!1,o.cancelable||!0)}At.defaults(s,e),t.dispatchEvent(s)},bind:function(t,n,i,e){return t.addEventListener?t.addEventListener(n,i,e||!1):t.attachEvent&&t.attachEvent("on"+n,i),Xt},unbind:function(t,n,i,e){return t.removeEventListener?t.removeEventListener(n,i,e||!1):t.detachEvent&&t.detachEvent("on"+n,i),Xt},addClass:function(t,n){if(void 0===t.className)t.className=n;else if(t.className!==n){var i=t.className.split(/ +/);-1===i.indexOf(n)&&(i.push(n),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Xt},removeClass:function(t,n){if(n)if(t.className===n)t.removeAttribute("class");else{var i=t.className.split(/ +/),e=i.indexOf(n);-1!==e&&(i.splice(e,1),t.className=i.join(" "))}else t.className=void 0;return Xt},hasClass:function(t,n){return RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var n=t,i={left:0,top:0};if(n.offsetParent)do{i.left+=n.offsetLeft,i.top+=n.offsetTop,n=n.offsetParent}while(n);return i},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Yt=function(t){function n(t,i){Ct(this,n);var e=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i)),o=e;return e.__prev=e.getValue(),e.__checkbox=document.createElement("input"),e.__checkbox.setAttribute("type","checkbox"),Xt.bind(e.__checkbox,"change",(function(){o.setValue(!o.__prev)}),!1),e.domElement.appendChild(e.__checkbox),e.updateDisplay(),e}return jt(n,t),Tt(n,[{key:"setValue",value:function(t){var i=Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(It),Nt=function(t){function n(t,i,e){Ct(this,n);var o=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i)),r=e,s=o;if(o.__select=document.createElement("select"),At.isArray(r)){var a={};At.each(r,(function(t){a[t]=t})),r=a}return At.each(r,(function(t,n){var i=document.createElement("option");i.innerHTML=n,i.setAttribute("value",t),s.__select.appendChild(i)})),o.updateDisplay(),Xt.bind(o.__select,"change",(function(){s.setValue(this.options[this.selectedIndex].value)})),o.domElement.appendChild(o.__select),o}return jt(n,t),Tt(n,[{key:"setValue",value:function(t){var i=Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return Xt.isActive(this.__select)?this:(this.__select.value=this.getValue(),Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this))}}]),n}(It),Vt=function(t){function n(t,i){function e(){r.setValue(r.__input.value)}Ct(this,n);var o=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i)),r=o;return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),Xt.bind(o.__input,"keyup",e),Xt.bind(o.__input,"change",e),Xt.bind(o.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),Xt.bind(o.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return jt(n,t),Tt(n,[{key:"updateDisplay",value:function(){return Xt.isActive(this.__input)||(this.__input.value=this.getValue()),Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(It),Jt=function(t){function n(t,i,e){Ct(this,n);var r=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i)),s=e||{};return r.__min=s.min,r.__max=s.max,r.__step=s.step,r.__impliedStep=At.isUndefined(r.__step)?0===r.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__step,r.__precision=o(r.__impliedStep),r}return jt(n,t),Tt(n,[{key:"setValue",value:function(t){var i=t;return void 0!==this.__min&&i<this.__min?i=this.__min:void 0!==this.__max&&i>this.__max&&(i=this.__max),void 0!==this.__step&&i%this.__step!=0&&(i=Math.round(i/this.__step)*this.__step),Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=o(t),this}}]),n}(It),Ut=function(t){function n(t,i,e){function o(){u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function r(t){var n=c-t.clientY;u.setValue(u.getValue()+n*u.__impliedStep),c=t.clientY}function s(){Xt.unbind(window,"mousemove",r),Xt.unbind(window,"mouseup",s),o()}Ct(this,n);var a=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i,e));a.__truncationSuspended=!1;var u=a,c=void 0;return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),Xt.bind(a.__input,"change",(function(){var t=parseFloat(u.__input.value);At.isNaN(t)||u.setValue(t)})),Xt.bind(a.__input,"blur",(function(){o()})),Xt.bind(a.__input,"mousedown",(function(t){Xt.bind(window,"mousemove",r),Xt.bind(window,"mouseup",s),c=t.clientY})),Xt.bind(a.__input,"keydown",(function(t){13===t.keyCode&&(u.__truncationSuspended=!0,this.blur(),u.__truncationSuspended=!1,o())})),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return jt(n,t),Tt(n,[{key:"updateDisplay",value:function(){var t,i;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),Math.round(t*(i=Math.pow(10,this.__precision)))/i),Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(Jt),Lt=function(t){function n(t,i,e,o,s){function a(t){t.preventDefault();var n=d.__background.getBoundingClientRect();return d.setValue(r(t.clientX,n.left,n.right,d.__min,d.__max)),!1}function u(){Xt.unbind(window,"mousemove",a),Xt.unbind(window,"mouseup",u),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function c(t){var n=t.touches[0].clientX,i=d.__background.getBoundingClientRect();d.setValue(r(n,i.left,i.right,d.__min,d.__max))}function h(){Xt.unbind(window,"touchmove",c),Xt.unbind(window,"touchend",h),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}Ct(this,n);var l=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i,{min:e,max:o,step:s})),d=l;return l.__background=document.createElement("div"),l.__foreground=document.createElement("div"),Xt.bind(l.__background,"mousedown",(function(t){document.activeElement.blur(),Xt.bind(window,"mousemove",a),Xt.bind(window,"mouseup",u),a(t)})),Xt.bind(l.__background,"touchstart",(function(t){1===t.touches.length&&(Xt.bind(window,"touchmove",c),Xt.bind(window,"touchend",h),c(t))})),Xt.addClass(l.__background,"slider"),Xt.addClass(l.__foreground,"slider-fg"),l.updateDisplay(),l.__background.appendChild(l.__foreground),l.domElement.appendChild(l.__background),l}return jt(n,t),Tt(n,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",Bt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(Jt),Wt=function(t){function n(t,i,e){Ct(this,n);var o=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i)),r=o;return o.__button=document.createElement("div"),o.__button.innerHTML=void 0===e?"Fire":e,Xt.bind(o.__button,"click",(function(t){return t.preventDefault(),r.fire(),!1})),Xt.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return jt(n,t),Tt(n,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),n}(It),Qt=function(t){function n(t,i){function e(t){h(t),Xt.bind(window,"mousemove",h),Xt.bind(window,"touchmove",h),Xt.bind(window,"mouseup",r),Xt.bind(window,"touchend",r)}function o(t){l(t),Xt.bind(window,"mousemove",l),Xt.bind(window,"touchmove",l),Xt.bind(window,"mouseup",a),Xt.bind(window,"touchend",a)}function r(){Xt.unbind(window,"mousemove",h),Xt.unbind(window,"touchmove",h),Xt.unbind(window,"mouseup",r),Xt.unbind(window,"touchend",r),c()}function a(){Xt.unbind(window,"mousemove",l),Xt.unbind(window,"touchmove",l),Xt.unbind(window,"mouseup",a),Xt.unbind(window,"touchend",a),c()}function u(){var t=Mt(this.value);!1!==t?(f.__color.__state=t,f.setValue(f.__color.toOriginal())):this.value=""+f.__color}function c(){f.__onFinishChange&&f.__onFinishChange.call(f,f.__color.toOriginal())}function h(t){-1===t.type.indexOf("touch")&&t.preventDefault();var n=f.__saturation_field.getBoundingClientRect(),i=t.touches&&t.touches[0]||t,e=(i.clientX-n.left)/(n.right-n.left),o=1-(i.clientY-n.top)/(n.bottom-n.top);return o>1?o=1:o<0&&(o=0),e>1?e=1:e<0&&(e=0),f.__color.v=o,f.__color.s=e,f.setValue(f.__color.toOriginal()),!1}function l(t){-1===t.type.indexOf("touch")&&t.preventDefault();var n=f.__hue_field.getBoundingClientRect(),i=1-((t.touches&&t.touches[0]||t).clientY-n.top)/(n.bottom-n.top);return i>1?i=1:i<0&&(i=0),f.__color.h=360*i,f.setValue(f.__color.toOriginal()),!1}Ct(this,n);var d=Dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i));d.__color=new Gt(d.getValue()),d.__temp=new Gt(0);var f=d;d.domElement=document.createElement("div"),Xt.makeSelectable(d.domElement,!1),d.__selector=document.createElement("div"),d.__selector.className="selector",d.__saturation_field=document.createElement("div"),d.__saturation_field.className="saturation-field",d.__field_knob=document.createElement("div"),d.__field_knob.className="field-knob",d.__field_knob_border="2px solid ",d.__hue_knob=document.createElement("div"),d.__hue_knob.className="hue-knob",d.__hue_field=document.createElement("div"),d.__hue_field.className="hue-field",d.__input=document.createElement("input"),d.__input.type="text",d.__input_textShadow="0 1px 1px ",Xt.bind(d.__input,"keydown",(function(t){13===t.keyCode&&u.call(this)})),Xt.bind(d.__input,"blur",u),Xt.bind(d.__selector,"mousedown",(function(){Xt.addClass(this,"drag").bind(window,"mouseup",(function(){Xt.removeClass(f.__selector,"drag")}))})),Xt.bind(d.__selector,"touchstart",(function(){Xt.addClass(this,"drag").bind(window,"touchend",(function(){Xt.removeClass(f.__selector,"drag")}))}));var g,p=document.createElement("div");return At.extend(d.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),At.extend(d.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:d.__field_knob_border+(d.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),At.extend(d.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),At.extend(d.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),At.extend(p.style,{width:"100%",height:"100%",background:"none"}),s(p,"top","rgba(0,0,0,0)","#000"),At.extend(d.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(g=d.__hue_field).style.background="",g.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",g.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",g.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",g.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",g.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",At.extend(d.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:d.__input_textShadow+"rgba(0,0,0,0.7)"}),Xt.bind(d.__saturation_field,"mousedown",e),Xt.bind(d.__saturation_field,"touchstart",e),Xt.bind(d.__field_knob,"mousedown",e),Xt.bind(d.__field_knob,"touchstart",e),Xt.bind(d.__hue_field,"mousedown",o),Xt.bind(d.__hue_field,"touchstart",o),d.__saturation_field.appendChild(p),d.__selector.appendChild(d.__field_knob),d.__selector.appendChild(d.__saturation_field),d.__selector.appendChild(d.__hue_field),d.__hue_field.appendChild(d.__hue_knob),d.domElement.appendChild(d.__input),d.domElement.appendChild(d.__selector),d.updateDisplay(),d}return jt(n,t),Tt(n,[{key:"updateDisplay",value:function(){var t=Mt(this.getValue());if(!1!==t){var n=!1;At.each(Gt.pn,(function(i){if(!At.isUndefined(t[i])&&!At.isUndefined(this.__color.__state[i])&&t[i]!==this.__color.__state[i])return n=!0,{}}),this),n&&At.extend(this.__color.__state,t)}At.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=this.__color.v<.5||this.__color.s>.5?255:0,e=255-i;At.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=""+this.__color,At.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+e+","+e+","+e+",.7)"})}}]),n}(It),Kt=["-moz-","-o-","-webkit-","-ms-",""],$t='<div id="dg-save" class="dg dialogue">\n\nHere\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n<textarea id="dg-new-constructor"></textarea>\n\n<div id="dg-save-locally">\n\n<input id="dg-local-storage" type="checkbox"/> Automatically save\nvalues to <code>localStorage</code> on exit.\n\n<div id="dg-local-explain">The values saved to <code>localStorage</code> will\noverride those passed to <code>dat.GUI</code>\'s constructor. This makes it\neasier to work incrementally, but <code>localStorage</code> is fragile,\nand your friends may not see the same values you do.\n\n</div>\n\n</div>\n\n</div>',Zt=function(t,n){var i=t[n];return At.isArray(arguments[2])||At.isObject(arguments[2])?new Nt(t,n,arguments[2]):At.isNumber(i)?At.isNumber(arguments[2])&&At.isNumber(arguments[3])?At.isNumber(arguments[4])?new Lt(t,n,arguments[2],arguments[3],arguments[4]):new Lt(t,n,arguments[2],arguments[3]):At.isNumber(arguments[4])?new Ut(t,n,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Ut(t,n,{min:arguments[2],max:arguments[3]}):At.isString(i)?new Vt(t,n):At.isFunction(i)?new Wt(t,n,""):At.isBoolean(i)?new Yt(t,n):null},qt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},tn=function(){function t(){Ct(this,t),this.backgroundElement=document.createElement("div"),At.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Xt.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),At.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;Xt.bind(this.backgroundElement,"click",(function(){n.hide()}))}return Tt(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),At.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,n=function n(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Xt.unbind(t.domElement,"webkitTransitionEnd",n),Xt.unbind(t.domElement,"transitionend",n),Xt.unbind(t.domElement,"oTransitionEnd",n)};Xt.bind(this.domElement,"webkitTransitionEnd",n),Xt.bind(this.domElement,"transitionend",n),Xt.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Xt.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Xt.getHeight(this.domElement)/2+"px"}}]),t}();!function(t,n){var i=document,e=document.createElement("style");e.type="text/css",e.innerHTML=t;var o=i.getElementsByTagName("head")[0];try{o.appendChild(e)}catch(t){}}(function(t){if("undefined"!=typeof window){var n=document.createElement("style");return n.setAttribute("type","text/css"),n.innerHTML=t,document.head.appendChild(n),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var nn="Default",en=function(){try{return!!window.localStorage}catch(t){return!1}}(),on=void 0,rn=!0,sn=void 0,an=!1,un=[],cn=function t(n){var i=this,e=n||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Xt.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=At.defaults(e,{closeOnTop:!1,autoPlace:!0,width:t.kn}),e=At.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),At.isUndefined(e.load)?e.load={preset:nn}:e.preset&&(e.load.preset=e.preset),At.isUndefined(e.parent)&&e.hideable&&un.push(this),e.resizable=At.isUndefined(e.parent)&&e.resizable,e.autoPlace&&At.isUndefined(e.scrollable)&&(e.scrollable=!0);var o,r=en&&"true"===localStorage.getItem(d(0,"isLocal")),s=void 0,u=void 0;if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},closeOnTop:{get:function(){return e.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:e.load.preset},set:function(t){i.parent?i.getRoot().preset=t:e.load.preset=t,function(t){for(var n=0;n<t.__preset_select.length;n++)t.__preset_select[n].value===t.preset&&(t.__preset_select.selectedIndex=n)}(this),i.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,w(i,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,u&&(u.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(n){e.closed=n,e.closed?Xt.addClass(i.__ul,t.yn):Xt.removeClass(i.__ul,t.yn),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=n?t.xn:t._n)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return r},set:function(t){en&&(r=t,t?Xt.bind(window,"unload",s):Xt.unbind(window,"unload",s),localStorage.setItem(d(0,"isLocal"),t))}}}),At.isUndefined(e.parent)){if(this.closed=e.closed||!1,Xt.addClass(this.domElement,t.An),Xt.makeSelectable(this.domElement,!1),en&&r){i.useLocalStorage=!0;var c=localStorage.getItem(d(0,"gui"));c&&(e.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t._n,Xt.addClass(this.__closeButton,t.zn),e.closeOnTop?(Xt.addClass(this.__closeButton,t.Sn),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Xt.addClass(this.__closeButton,t.Rn),this.domElement.appendChild(this.__closeButton)),Xt.bind(this.__closeButton,"click",(function(){i.closed=!i.closed}))}else{void 0===e.closed&&(e.closed=!0);var h=document.createTextNode(e.name);Xt.addClass(h,"controller-name"),u=a(i,h),Xt.addClass(this.__ul,t.yn),Xt.addClass(u,"title"),Xt.bind(u,"click",(function(t){return t.preventDefault(),i.closed=!i.closed,!1})),e.closed||(this.closed=!1)}e.autoPlace&&(At.isUndefined(e.parent)&&(rn&&(sn=document.createElement("div"),Xt.addClass(sn,"dg"),Xt.addClass(sn,t.Mn),document.body.appendChild(sn),rn=!1),sn.appendChild(this.domElement),Xt.addClass(this.domElement,t.En)),this.parent||w(i,e.width)),this.__resizeHandler=function(){i.onResizeDebounced()},Xt.bind(window,"resize",this.__resizeHandler),Xt.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Xt.bind(this.__ul,"transitionend",this.__resizeHandler),Xt.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),e.resizable&&function(t){function n(n){return n.preventDefault(),t.width+=o-n.clientX,t.onResize(),o=n.clientX,!1}function i(){Xt.removeClass(t.__closeButton,cn.Fn),Xt.unbind(window,"mousemove",n),Xt.unbind(window,"mouseup",i)}function e(e){return e.preventDefault(),o=e.clientX,Xt.addClass(t.__closeButton,cn.Fn),Xt.bind(window,"mousemove",n),Xt.bind(window,"mouseup",i),!1}var o=void 0;t.__resize_handle=document.createElement("div"),At.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Xt.bind(t.__resize_handle,"mousedown",e),Xt.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),this.saveToLocalStorageIfPossible=s=function(){en&&"true"===localStorage.getItem(d(0,"isLocal"))&&localStorage.setItem(d(0,"gui"),JSON.stringify(i.getSaveObject()))},e.parent||((o=i.getRoot()).width+=1,At.defer((function(){o.width-=1})))};cn.toggleHide=function(){an=!an,At.each(un,(function(t){t.domElement.style.display=an?"none":""}))},cn.En="a",cn.Mn="ac",cn.An="main",cn.i="cr",cn.On="taller-than-window",cn.yn="closed",cn.zn="close-button",cn.Sn="close-top",cn.Rn="close-bottom",cn.Fn="drag",cn.kn=245,cn._n="Close Controls",cn.xn="Open Controls",cn._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||cn.toggleHide()},Xt.bind(window,"keydown",cn._keydownHandler,!1),At.extend(cn.prototype,{add:function(t,n){return l(this,t,n,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,n){return l(this,t,n,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var n=this;At.defer((function(){n.onResize()}))},destroy:function(){if(this.parent)throw Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&sn.removeChild(this.domElement);var t=this;At.each(this.__folders,(function(n){t.removeFolder(n)})),Xt.unbind(window,"keydown",cn._keydownHandler,!1),u(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw Error('You already have a folder in this GUI by the name "'+t+'"');var n={name:t,parent:this};n.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(n.closed=this.load.folders[t].closed,n.load=this.load.folders[t]);var i=new cn(n);this.__folders[t]=i;var e=a(this,i.domElement);return Xt.addClass(e,"folder"),i},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],u(t);var n=this;At.each(t.__folders,(function(n){t.removeFolder(n)})),At.defer((function(){n.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var n=Xt.getOffset(t.__ul).top,i=0;At.each(t.__ul.childNodes,(function(n){t.autoPlace&&n===t.__save_row||(i+=Xt.getHeight(n))})),window.innerHeight-n-20<i?(Xt.addClass(t.domElement,cn.On),t.__ul.style.height=window.innerHeight-n-20+"px"):(Xt.removeClass(t.domElement,cn.On),t.__ul.style.height="auto")}t.__resize_handle&&At.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:At.debounce((function(){this.onResize()}),50),remember:function(){if(At.isUndefined(on)&&((on=new tn).domElement.innerHTML=$t),this.parent)throw Error("You can only call remember on a top level GUI.");var t=this;At.each(Array.prototype.slice.call(arguments),(function(n){0===t.__rememberedObjects.length&&p(t),-1===t.__rememberedObjects.indexOf(n)&&t.__rememberedObjects.push(n)})),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=v(this)),t.folders={},At.each(this.__folders,(function(n,i){t.folders[i]=n.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=v(this),c(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.t=v(this,!0)),this.load.remembered[t]=v(this),this.preset=t,f(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){At.each(this.__controllers,(function(n){this.getRoot().load.remembered?h(t||this.getRoot(),n):n.setValue(n.initialValue),n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())}),this),At.each(this.__folders,(function(t){t.revert(t)})),t||c(this.getRoot(),!1)},listen:function(t){var n=0===this.__listening.length;this.__listening.push(t),n&&m(this.__listening)},updateDisplay:function(){At.each(this.__controllers,(function(t){t.updateDisplay()})),At.each(this.__folders,(function(t){t.updateDisplay()}))}});var hn=cn,ln=34962,dn=3553,fn=5126,gn=document.getElementById("update"),pn=document.getElementById("delta"),wn=document.getElementById("fps"),vn=1/60,mn=class extends class{constructor(t=1e4){this.l=[],this.Ut=[],this._=t}o(){return this.Ut.length>0?this.Ut.pop():this.l.push(0)-1}m(t){this.l[t]=0,this.Ut.push(t)}}{constructor(){super(...arguments),this.F=[],this.B=[],this.et=[],this.st=[],this.J=[],this.Cn=[],this.nt=[],this.p=[],this.U=[],this.A=[],this.ot=[],this.Yt=[],this.Vt=[],this.K=[]}},bn={};((t,n)=>{for(var i in n)yt(t,i,{get:n[i],enumerable:!0})})(bn,{"../assets/deska1.png":()=>yn,"../assets/deska2.png":()=>xn,"../assets/garnek21.png":()=>_n,"../assets/garnek22.png":()=>An,"../assets/garnek23.png":()=>zn,"../assets/garnek24.png":()=>Sn,"../assets/garnek2_front.png":()=>Rn,"../assets/groszek_obrany.png":()=>Mn,"../assets/groszek_surowy.png":()=>En,"../assets/groszek_ugotowany.png":()=>Fn,"../assets/jablko_kawalek1.png":()=>On,"../assets/jablko_kawalek2.png":()=>Cn,"../assets/jablko_obrane.png":()=>Tn,"../assets/jablko_surowe.png":()=>Bn,"../assets/karton.png":()=>jn,"../assets/karton_front.png":()=>Dn,"../assets/marchewka_kawalek1.png":()=>Gn,"../assets/marchewka_kawalek2.png":()=>In,"../assets/marchewka_obrana.png":()=>Hn,"../assets/marchewka_obrana_ugotowana.png":()=>Pn,"../assets/marchewka_surowa.png":()=>Xn,"../assets/marchewka_ugotowana.png":()=>Yn,"../assets/miska.png":()=>Nn,"../assets/miska_front.png":()=>Vn,"../assets/obieraczka.png":()=>Jn,"../assets/obieraczka_front.png":()=>Un,"../assets/sloik.png":()=>Ln,"../assets/szatkownica.png":()=>Wn,"../assets/szatkownica_front.png":()=>Qn,"../assets/ziemniak_kawalek1.png":()=>Kn,"../assets/ziemniak_kawalek2.png":()=>$n,"../assets/ziemniak_obrany.png":()=>Zn,"../assets/ziemniak_obrany_ugotowany.png":()=>qn,"../assets/ziemniak_surowy.png":()=>ti,"../assets/ziemniak_ugotowany.png":()=>ni,default:()=>ii});var kn,yn={x:384,y:96,width:128,height:32},xn={x:384,y:128,width:128,height:32},_n={x:0,y:0,width:128,height:96},An={x:128,y:0,width:128,height:96},zn={x:0,y:96,width:128,height:96},Sn={x:128,y:96,width:128,height:96},Rn={x:256,y:0,width:128,height:96},Mn={x:384,y:288,width:16,height:16},En={x:448,y:160,width:32,height:32},Fn={x:480,y:160,width:32,height:32},On={x:400,y:288,width:16,height:16},Cn={x:416,y:288,width:16,height:16},Tn={x:448,y:192,width:32,height:32},Bn={x:480,y:192,width:32,height:32},jn={x:256,y:96,width:128,height:96},Dn={x:0,y:192,width:128,height:96},Gn={x:432,y:288,width:16,height:16},In={x:448,y:288,width:16,height:16},Hn={x:384,y:224,width:32,height:32},Pn={x:416,y:224,width:32,height:32},Xn={x:448,y:224,width:32,height:32},Yn={x:480,y:224,width:32,height:32},Nn={x:128,y:192,width:128,height:96},Vn={x:256,y:192,width:128,height:96},Jn={x:0,y:288,width:128,height:96},Un={x:128,y:288,width:128,height:96},Ln={x:384,y:160,width:64,height:64},Wn={x:256,y:288,width:128,height:96},Qn={x:384,y:0,width:128,height:96},Kn={x:464,y:288,width:16,height:16},$n={x:480,y:288,width:16,height:16},Zn={x:384,y:256,width:32,height:32},qn={x:416,y:256,width:32,height:32},ti={x:448,y:256,width:32,height:32},ni={x:480,y:256,width:32,height:32},ii={"../assets/deska1.png":yn,"../assets/deska2.png":xn,"../assets/garnek21.png":_n,"../assets/garnek22.png":An,"../assets/garnek23.png":zn,"../assets/garnek24.png":Sn,"../assets/garnek2_front.png":Rn,"../assets/groszek_obrany.png":Mn,"../assets/groszek_surowy.png":En,"../assets/groszek_ugotowany.png":Fn,"../assets/jablko_kawalek1.png":On,"../assets/jablko_kawalek2.png":Cn,"../assets/jablko_obrane.png":Tn,"../assets/jablko_surowe.png":Bn,"../assets/karton.png":jn,"../assets/karton_front.png":Dn,"../assets/marchewka_kawalek1.png":Gn,"../assets/marchewka_kawalek2.png":In,"../assets/marchewka_obrana.png":Hn,"../assets/marchewka_obrana_ugotowana.png":Pn,"../assets/marchewka_surowa.png":Xn,"../assets/marchewka_ugotowana.png":Yn,"../assets/miska.png":Nn,"../assets/miska_front.png":Vn,"../assets/obieraczka.png":Jn,"../assets/obieraczka_front.png":Un,"../assets/sloik.png":Ln,"../assets/szatkownica.png":Wn,"../assets/szatkownica_front.png":Qn,"../assets/ziemniak_kawalek1.png":Kn,"../assets/ziemniak_kawalek2.png":$n,"../assets/ziemniak_obrany.png":Zn,"../assets/ziemniak_obrany_ugotowany.png":qn,"../assets/ziemniak_surowy.png":ti,"../assets/ziemniak_ugotowany.png":ni},ei=bn,oi=32772,ri=[0,0],si=[0,0],ai=[0,0],ui=[0,0],ci=0,hi=[0,0],li=[0,0],di=[0,0],fi=[0,0],gi=[0,0],pi=[0,0],wi=Math.PI/180,vi=[0,0],mi=50100,bi=16,ki=4*bi,yi=Float32Array.from([-.5,-.5,0,0,1,.5,-.5,0,1,1,-.5,.5,0,0,0,.5,.5,0,1,0]),xi=new class extends class extends class{constructor(){this.Tn=0,this.Bn=0,this.zt=window.innerWidth,this.At=window.innerHeight,this.jn=!0,this.Dn={MouseX:0,MouseY:0},this.q={MouseX:0,MouseY:0,WheelY:0},this.$={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.Gn={},this.Kt=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.In():this.Hn())),this.Kt.addEventListener("contextmenu",(t=>t.preventDefault())),this.Kt.addEventListener("mousedown",(t=>{this.Dn["Mouse"+t.button]=1,this.q["Mouse"+t.button]=1})),this.Kt.addEventListener("mouseup",(t=>{this.Dn["Mouse"+t.button]=0,this.q["Mouse"+t.button]=-1})),this.Kt.addEventListener("mousemove",(t=>{this.q.MouseX=t.clientX-this.Dn.MouseX,this.q.MouseY=t.clientY-this.Dn.MouseY,this.Dn.MouseX=t.clientX,this.Dn.MouseY=t.clientY})),this.Kt.addEventListener("wheel",(t=>{t.preventDefault(),this.q.WheelY=t.deltaY})),this.Kt.addEventListener("touchstart",(t=>{t.target===this.Kt&&t.preventDefault(),1===t.touches.length&&(this.Gn={});for(let n=0;n<t.touches.length;n++)this.Gn[t.touches[n].identifier]=n;for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],e=this.Gn[i.identifier];this.Dn["Touch"+e]=1,this.Dn[`Touch${e}X`]=i.clientX,this.Dn[`Touch${e}Y`]=i.clientY,this.q["Touch"+e]=1,this.q[`Touch${e}X`]=0,this.q[`Touch${e}Y`]=0}})),this.Kt.addEventListener("touchmove",(t=>{t.target===this.Kt&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=t.changedTouches[n],e=this.Gn[i.identifier];this.q[`Touch${e}X`]=i.clientX-this.Dn[`Touch${e}X`],this.q[`Touch${e}Y`]=i.clientY-this.Dn[`Touch${e}Y`],this.Dn[`Touch${e}X`]=i.clientX,this.Dn[`Touch${e}Y`]=i.clientY}})),this.Kt.addEventListener("touchend",(t=>{t.target===this.Kt&&t.preventDefault();for(let n=0;n<t.changedTouches.length;n++){let i=this.Gn[t.changedTouches[n].identifier];this.Dn["Touch"+i]=0,this.q["Touch"+i]=-1}})),this.Kt.addEventListener("touchcancel",(t=>{for(let n=0;n<t.changedTouches.length;n++){let i=this.Gn[t.changedTouches[n].identifier];this.Dn["Touch"+i]=0,this.q["Touch"+i]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.Dn[t.code]=1,this.q[t.code]=1)})),window.addEventListener("keyup",(t=>{this.Dn[t.code]=0,this.q[t.code]=-1}))}Hn(){let t=0,n=performance.now(),i=e=>{let o=(e-n)/1e3;for(n=e,this.Tn=requestAnimationFrame(i),this.Pn(o),t+=o;t>=vn;)t-=vn,this.Xn(vn),this.Yn();this.Nn(o),this.Vn(o)};this.In(),i(n)}In(){cancelAnimationFrame(this.Tn),this.Tn=0}Pn(t){this.Bn=performance.now();let n=Math.abs(this.q.MouseX)+Math.abs(this.q.MouseY);this.$.Mouse+=n,1===this.Dn.Mouse0&&(this.$.Mouse0+=n),1===this.Dn.Mouse1&&(this.$.Mouse1+=n),1===this.Dn.Mouse2&&(this.$.Mouse2+=n),1===this.Dn.Touch0&&(this.$.Touch0+=Math.abs(this.q.Touch0X)+Math.abs(this.q.Touch0Y)),1===this.Dn.Touch1&&(this.$.Touch1+=Math.abs(this.q.Touch1X)+Math.abs(this.q.Touch1Y))}Xn(t){}Nn(t){}Yn(){-1===this.q.Mouse0&&(this.$.Mouse0=0),-1===this.q.Mouse1&&(this.$.Mouse1=0),-1===this.q.Mouse2&&(this.$.Mouse2=0),-1===this.q.Touch0&&(this.$.Touch0=0),-1===this.q.Touch1&&(this.$.Touch1=0);for(let t in this.q)this.q[t]=0}Vn(t){this.jn=!1;let n=performance.now()-this.Bn;gn&&(gn.textContent=n.toFixed(1)),pn&&(pn.textContent=(1e3*t).toFixed(1)),wn&&(wn.textContent=(1/t).toFixed())}}{constructor(){super(),this.Jn=document.querySelector("#billboard"),this.Un=this.Jn.getContext("2d"),this.Ln=document.querySelector("#scene"),this.Ft=this.Ln.getContext("webgl2"),this.Audio=new AudioContext,this.Wn=[],this.Qn={},this.Ft.enable(2929),this.Ft.enable(2884),this.Ft.blendFunc(770,771)}}{constructor(){super(),this.u=new mn(mi),this.Mt=function(t){let n=function(t,n,i){let e=t.createProgram();return t.attachShader(e,z(t,35633,"#version 300 es\n\nuniform mat4 pv;\nuniform vec2 sheet_size;\n\n\nin vec4 attr_position;\nin vec2 attr_texcoord;\n\n\nin vec4 attr_rotation; \nin vec4 attr_translation; \nin vec4 attr_color;\nin vec4 attr_sprite;\n\nout vec2 vert_texcoord;\nout vec4 vert_color;\nout vec4 vert_sprite;\n\nvoid main() {\nmat4 world = mat4(\nattr_rotation.xy, 0, 0,\nattr_rotation.zw, 0, 0,\n0, 0, 1, 0,\nattr_translation.xyz, 1\n);\n\nvec4 world_position = world * attr_position;\ngl_Position = pv * world_position;\nif (attr_translation.w == 0.0) {\ngl_Position.z = 2.0;\n}\n\n\n\nvert_texcoord = (attr_sprite.xy + attr_sprite.zw * attr_texcoord) / sheet_size;\nvert_texcoord.y *= -1.0;\nvert_color = attr_color;\n}\n")),t.attachShader(e,z(t,35632,"#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D sheet_texture;\n\nin vec2 vert_texcoord;\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color * texture(sheet_texture, vert_texcoord);\nif (frag_color.a == 0.0) {\ndiscard;\n}\n}\n")),t.linkProgram(e),e}(t);return{Ht:5,Ot:n,Ct:{I:t.getUniformLocation(n,"pv"),u:t.getUniformLocation(n,"world"),Bt:t.getUniformLocation(n,"sheet_texture"),jt:t.getUniformLocation(n,"sheet_size"),Kn:t.getAttribLocation(n,"attr_position"),$n:t.getAttribLocation(n,"attr_texcoord"),Zn:t.getAttribLocation(n,"attr_rotation"),qn:t.getAttribLocation(n,"attr_translation"),ti:t.getAttribLocation(n,"attr_color"),ni:t.getAttribLocation(n,"attr_sprite")}}}(this.Ft),this.Et={},this.tt=32,this.ii=null,this.ei=null,this.spawnEnabled=!1,this.spawnInterval=1,this.spawnCount=1,this.physicsGravity=9.81,this.physicsFriction=0,this.physicsBounce=1.1,this.physicsCollisions=!0,this.Qt="title",this.nn=0,this.k=new Float32Array(this.u._*bi),this.It=this.Ft.createBuffer(),this.Ft.pixelStorei(37440,!0),this.Ft.enable(3042);let t=this.Mt,n=this.Ft.createBuffer();this.Ft.bindBuffer(ln,n),this.Ft.bufferData(ln,yi,35044),this.Ft.enableVertexAttribArray(t.Ct.Kn),this.Ft.vertexAttribPointer(t.Ct.Kn,3,fn,!1,20,0),this.Ft.enableVertexAttribArray(t.Ct.$n),this.Ft.vertexAttribPointer(t.Ct.$n,2,fn,!1,20,12),this.Ft.bindBuffer(ln,this.It),this.Ft.bufferData(ln,this.u._*ki,35040),this.Ft.enableVertexAttribArray(t.Ct.Zn),this.Ft.vertexAttribDivisor(t.Ct.Zn,1),this.Ft.vertexAttribPointer(t.Ct.Zn,4,fn,!1,ki,0),this.Ft.enableVertexAttribArray(t.Ct.qn),this.Ft.vertexAttribDivisor(t.Ct.qn,1),this.Ft.vertexAttribPointer(t.Ct.qn,4,fn,!1,ki,16),this.Ft.enableVertexAttribArray(t.Ct.ti),this.Ft.vertexAttribDivisor(t.Ct.ti,1),this.Ft.vertexAttribPointer(t.Ct.ti,4,fn,!1,ki,32),this.Ft.enableVertexAttribArray(t.Ct.ni),this.Ft.vertexAttribDivisor(t.Ct.ni,1),this.Ft.vertexAttribPointer(t.Ct.ni,4,fn,!1,ki,48)}Xn(t){!function(t,n){let i=t.Wn[0];if(void 0===i)return;let e=t.u.B[i];if(2===e.j)throw Error("XR not implemented");let o=[t.Dn.MouseX/t.zt*2-1,-t.Dn.MouseY/t.At*2+1,0];if(function(t,n,i){let e=n[0],o=n[1],r=n[2],s=i[3]*e+i[7]*o+i[11]*r+i[15]||1;t[0]=(i[0]*e+i[4]*o+i[8]*r+i[12])/s,t[1]=(i[1]*e+i[5]*o+i[9]*r+i[13])/s,t[2]=(i[2]*e+i[6]*o+i[10]*r+i[14])/s}(o,o,e.D.Xt),x(hi,[o[0],o[1]],t.u.K[i].u),null!==t.ei){if(-1===t.q.Mouse0)return document.body.classList.remove("grabbing"),void(t.ei=null);let n=t.u.K[t.ei];return T(n.Z,hi),j(n.Z,n.Z,li),void(t.u.l[t.ei]|=256)}t.ii=null;for(let n=0;n<t.u.l.length;n++)if(33280==(33280&t.u.l[n])&&(r=hi,y(di,t.u.K[n].u),H(r,di)<2.9)){if(t.ii=n,document.body.classList.add("grab"),1===t.q.Mouse0&&(document.body.classList.add("grabbing"),t.ei=n,j(li,hi,t.u.K[n].Z)),t.q.WheelY){let i=t.u.K[n];i.W-=.1*t.q.WheelY,i.W%=360,t.u.l[n]|=256}return}var r;document.body.classList.remove("grab")}(this),function(t,n){if(null===t.ii&&t.q.WheelY){let n=4**((ci=Math.max(-500,Math.min(500,ci+t.q.WheelY)))/-500);.9<n&&n<1.1&&(n=1),t.tt=32*n,t.jn=!0}if(null===t.ei&&(1===t.q.Mouse0?document.body.classList.add("grabbing"):-1===t.q.Mouse0&&document.body.classList.remove("grabbing"),t.$.Mouse0>5))for(let n=0;n<t.u.l.length;n++)34==(34&t.u.l[n])&&Y(t,n)}(this),this.spawnEnabled&&(function(t,n){for(let n=0;n<t.u.l.length;n++)36864==(36864&t.u.l[n])&&Q(t,n)}(this),function(t,n){for(let i=0;i<t.u.l.length;i++)36864==(36864&t.u.l[i])&&K(t,i,n)}(this,t),it(this),this.physicsCollisions&&function(t,n){for(let n=0;n<t.u.l.length;n++)if((t.u.l[n]&oi)===oi){let i=t.u.et[n];y(i.$t,t.u.K[n].u),i.rt=null}for(let n=0;n<t.u.l.length;n++)if(32776==(32776&t.u.l[n])){let o=t.u.K[n],r=t.u.st[n];y(r.$t,o.u),r.Zt>0?(x(r.tn,[0,-r.Zt/2],o.u),x(r.qt,[0,r.Zt/2],o.u)):(x(r.tn,[r.Zt/2,0],o.u),x(r.qt,[-r.Zt/2,0],o.u));for(let o=0;o<t.u.l.length;o++)if((t.u.l[o]&oi)===oi){let s=t.u.et[o];s.ct&r.ut&&(P(ri,r.tn,r.qt,s.$t),H(ri,s.$t)<(r.wt+s.wt)**2&&(s.rt=n,j(s.St,s.$t,ri),G(s.St,s.St),s.Rt=r.wt+s.wt-Math.hypot((e=s.$t)[0]-(i=ri)[0],e[1]-i[1])))}}var i,e}(this),function(t,n){for(let n=0;n<t.u.l.length;n++)36868==(36868&t.u.l[n])&&$(t,n)}(this)),it(this),function(t,n){for(let n=0;n<t.u.l.length;n++)68==(68&t.u.l[n])&&U(t,n)}(this)}Nn(t){!function(t,n){for(let n=0;n<t.u.l.length;n++)1040==(1040&t.u.l[n])&&X(t,n)}(this),this.spawnEnabled&&(function(t,n){for(let i=0;i<t.u.l.length;i++)2049==(2049&t.u.l[i])&&F(t,i,n)}(this,t),function(t,n){for(let i=0;i<t.u.l.length;i++)34048==(34048&t.u.l[i])&&L(t,i,n)}(this,t),function(t,n){for(let n=0;n<t.u.l.length;n++)40960==(40960&t.u.l[n])&&tt(t,n)}(this),function(t,n){for(let i=0;i<t.u.l.length;i++)49152==(49152&t.u.l[i])&&nt(t,i,n)}(this,t)),function(t,n){if(t.zt==window.innerWidth&&t.At==window.innerHeight||(t.jn=!0),t.jn){t.zt=t.Ln.width=t.Jn.width=window.innerWidth,t.At=t.Ln.height=t.Jn.height=window.innerHeight;for(let n=0;n<t.u.l.length;n++)if(2==(2&t.u.l[n])){let o=t.u.B[n];if(0==o.j&&1==o.D.j){o.D.wt=t.At/t.tt/2,function(t,n,i,e,o,r,s){let a=1/(o-i),u=1/(e-n),c=1/(r-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(o+i)*a,t[13]=(n+e)*u,t[14]=(s+r)*c,t[15]=1}((i=o.D).D,i.wt,i.wt*(e=t.zt/t.At),-i.wt,-i.wt*e,i.Pt,i.Y),function(t,n){let i=n[0],e=n[1],o=n[2],r=n[3],s=n[4],a=n[5],u=n[6],c=n[7],h=n[8],l=n[9],d=n[10],f=n[11],g=n[12],p=n[13],w=n[14],v=n[15],m=i*a-e*s,b=i*u-o*s,k=i*c-r*s,y=e*u-o*a,x=e*c-r*a,_=o*c-r*u,A=h*p-l*g,z=h*w-d*g,S=h*v-f*g,R=l*w-d*p,M=l*v-f*p,E=d*v-f*w,F=m*E-b*M+k*R+y*S-x*z+_*A;F&&(F=1/F,t[0]=(a*E-u*M+c*R)*F,t[1]=(o*M-e*E-r*R)*F,t[2]=(p*_-w*x+v*y)*F,t[3]=(d*x-l*_-f*y)*F,t[4]=(u*S-s*E-c*z)*F,t[5]=(i*E-o*S+r*z)*F,t[6]=(w*k-g*_-v*b)*F,t[7]=(h*_-d*k+f*b)*F,t[8]=(s*M-a*S+c*A)*F,t[9]=(e*S-i*M-r*A)*F,t[10]=(g*x-p*k+v*m)*F,t[11]=(l*k-h*x-f*m)*F,t[12]=(a*z-s*R-u*A)*F,t[13]=(i*R-e*z+o*A)*F,t[14]=(p*b-g*y-w*m)*F,t[15]=(h*y-l*b+d*m)*F)}(i.Xt,i.D);break}}}var i,e}(this),function(t,n){t.Wn=[];for(let n=0;n<t.u.l.length;n++)if(32770==(32770&t.u.l[n])){let i=t.u.B[n];if(0!==i.j)throw Error("Only canvas cameras are supported.");let e=i.D,o=t.u.K[n];i.G[0]=o.vt[0],i.G[1]=o.vt[1],i.G[4]=o.vt[2],i.G[5]=o.vt[3],i.G[12]=o.vt[4],i.G[13]=o.vt[5],i.G[14]=-2,O(i.I,e.D,i.G),i.H[0]=o.u[4],i.H[1]=o.u[5],i.H[2]=2,t.Wn.push(n)}}(this),function(t,n){let i=t.Un,e=t.u.B[t.Wn[0]];if(2===e.j)throw Error("XR not implemented");i.resetTransform(),i.fillStyle="#D7AAA9",i.fillRect(0,0,t.zt,t.At);let o=t.zt/2-e.H[0]*t.tt,r=t.At/2+e.H[1]*t.tt,s=t.tt/32,a=t.zt/2,u=t.At/2;i.fillStyle="#FFD6D5",i.fillRect(o-a,r-u,2*a,2*u),i.setTransform(s,-.2*s,-.3*s,s,o,r),i.fillStyle="#FFAA79",i.fillRect(0,0,400,400),i.setTransform(s,.3*s,.2*s,s,o,r),i.fillStyle="#D4FCA9",i.beginPath(),i.arc(0,0,200,0,2*Math.PI),i.fill()}(this),function(t,n){for(let n=0;n<t.u.l.length;n++){let i=n*bi+7;2048&t.u.l[n]?0==t.k[i]&&(t.k[i]=1):1==t.k[i]&&(t.k[i]=0)}for(let n of t.Wn){let i=t.u.B[n];0===i.j&&(t.Ft.bindFramebuffer(36160,null),t.Ft.viewport(0,0,t.zt,t.At),t.Ft.clearColor(...i.N),t.Ft.clear(i.V),Z(t,i))}}(this),rt(this)}Wt(){this.nn=0;for(let t=0;t<this.u.l.length;t++)64&this.u.l[t]&&A(this.u,t)}};window.game=xi,Promise.all([async function(t,n){let i=await new Promise((t=>{let n=new Image;n.src="../textures/spritesheet.png.webp",n.onload=()=>t(n)}));t.Et[n]=function(t,n){let i=t.createTexture();return t.bindTexture(dn,i),t.texImage2D(dn,0,6408,6408,5121,n),t.texParameteri(dn,10241,9728),t.texParameteri(dn,10240,9728),t.texParameteri(dn,10242,10497),t.texParameteri(dn,10243,10497),{Tt:i,Dt:n.width,Gt:n.height}}(t.Ft,i)}(xi,"spritesheet.png")]).then((()=>{var t;(t=xi).u=new mn(mi),t.jn=!0,t.spawnEnabled=!0,b(t,[st([0,0]),C(q(5,1,3),[0,0,0,0]),(t,n)=>{t.u.l[n]|=32,t.u.Cn[n]={}}]),b(t,[st([4,5]),(t,n)=>{t.u.l[n]|=512},_([st([-1,.5],180),S("ziemniak_surowy"),R(1)],[st(void 0,0,[4,3]),S("karton"),R(0)],[st(void 0,0,[4,3]),S("karton_front"),R(1)],[st(),ht([1.3,.8]),lt(kt,1)])]),b(t,[st([3.5,-1],-45,[4,1]),...ct()]),b(t,[st([8,-5],45,[4,1]),...ct()]),b(t,[...ft(),st([4,-10],0,[4,3])]),xi.Hn()})),window.playNow=function(){var t;xi.Qt="play",(t=xi).u=new mn(mi),t.jn=!0,t.spawnEnabled=!1,b(t,[st([0,0]),C(q(5,1,3),[0,0,0,0]),(t,n)=>{t.u.l[n]|=32,t.u.Cn[n]={}}]),b(t,[st([-7.5,5]),(t,n)=>{t.u.l[n]|=512},_([st([-1,.5],180),S("ziemniak_surowy"),R(1)],[st(void 0,0,[4,3]),S("karton"),R(0)],[st(void 0,0,[4,3]),S("karton_front"),R(1)],[st(),ht([1.3,.8]),lt(kt,1)],[st(),ht([1.3,.8]),lt(kt,2)],[st(),ht([1.3,.8]),lt(kt,3)],[st(),ht([1.3,.8]),lt(kt,4)],[st(),ht([1.3,.8]),lt(kt,5)])]),b(t,[st([-2.5,5]),(t,n)=>{t.u.l[n]|=512},_([st([-1,.5],180),S("marchewka_surowa"),R(1)],[st(void 0,0,[4,3]),S("karton"),R(0)],[st(void 0,0,[4,3]),S("karton_front"),R(1)],[st(),ht([1.3,.8]),lt(gt,1)],[st(),ht([1.3,.8]),lt(gt,2)],[st(),ht([1.3,.8]),lt(gt,3)],[st(),ht([1.3,.8]),lt(gt,4)],[st(),ht([1.3,.8]),lt(gt,5)])]),b(t,[st([2.5,5]),(t,n)=>{t.u.l[n]|=512},_([st([-1,.5],180),S("groszek_surowy"),R(1)],[st(void 0,0,[4,3]),S("karton"),R(0)],[st(void 0,0,[4,3]),S("karton_front"),R(1)],[st(),ht([1.3,.8]),lt(vt,1)],[st(),ht([1.3,.8]),lt(vt,2)],[st(),ht([1.3,.8]),lt(vt,3)],[st(),ht([1.3,.8]),lt(vt,4)],[st(),ht([1.3,.8]),lt(vt,5)])]),b(t,[st([7.5,5]),(t,n)=>{t.u.l[n]|=512},_([st([-1,.5],180),S("jablko_surowe"),R(1)],[st(void 0,0,[4,3]),S("karton"),R(0)],[st(void 0,0,[4,3]),S("karton_front"),R(1)],[st(),ht([1.3,.8]),lt(dt,1)],[st(),ht([1.3,.8]),lt(dt,2)],[st(),ht([1.3,.8]),lt(dt,3)],[st(),ht([1.3,.8]),lt(dt,4)],[st(),ht([1.3,.8]),lt(dt,5)])]),b(t,[st([-3,0],-45,[4,1]),...ct()]),b(t,[st([3,0],-45,[4,1]),...ct()]),b(t,[...wt(),st([-5,-5],0,[4,3])]),b(t,[...mt(),st([0,-5],0,[4,3])]),b(t,[(t,n)=>{t.u.l[n]|=512},_([st([0,-.4]),ht([.25,.1])],[st(),ht([.01,.01]),S("szatkownica"),R(0)],[st(),ht([.01,.01]),S("szatkownica_front"),R(1)],[st([0,-.2]),ut(8,1)],[st([-.3,0],-30),ut(1,.2,.3),W(0,1)],[st([.3,0],30),ut(1,.2,.3),W(0,1)]),st([5,-5],0,[4,3])]),b(t,[...wt(),st([-5,-10],0,[4,3])]),b(t,[...mt(),st([0,-10],0,[4,3])]),b(t,[...ft(),st([5,-10],0,[4,3])]),document.querySelector("audio").play();let n={pauseLoop(){xi.In()},resumeLoop(){xi.Hn()},start(){xi.spawnEnabled=!xi.spawnEnabled,o.name(xi.spawnEnabled?"Pause":"Resume")},restart(){xi.Wt(),xi.spawnEnabled=!0,o.name("Pause")},physicsReset(){xi.physicsGravity=9.81,xi.physicsFriction=0,xi.physicsBounce=1.1},addPlank(){b(xi,[st([0,0],-45,[4,1]),...ct()])},toggleMusic(){let t=document.querySelector("audio");t.paused?(s.name("Pause Music"),t.play()):(s.name("Play Music"),t.pause())}},i=new hn,e=i.addFolder("Simulation");var o=e.add(n,"start").name("Run!");e.add(n,"restart").name("Restart"),e.open();let r=i.addFolder("Settings");var s=r.add(n,"toggleMusic").name("Pause Music");r.open();let a=i.addFolder("Utensils");a.add(n,"addPlank").name("Add a Wooden Board"),a.open();let u=i.addFolder("Ingredients");u.add(xi,"spawnInterval",0,1).step(.01).name("Interval (s)"),u.add(xi,"spawnCount",1,5).step(1).name("Multiplier");let c=i.addFolder("Physics");c.add(xi,"physicsCollisions").name("Enable Collisions"),c.add(xi,"physicsGravity",0,20).step(.01).listen().name("Gravity"),c.add(xi,"physicsFriction",0,1).step(.01).listen().name("Friction"),c.add(xi,"physicsBounce",0,3).step(.01).listen().name("Bounciness"),c.add(n,"physicsReset").name("Reset");let h=i.addFolder("Game Loop");h.add(n,"pauseLoop").name("Pause"),h.add(n,"resumeLoop").name("Resume")}})();
