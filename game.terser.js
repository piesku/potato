(()=>{function t(t,e){let i=t.i.t();for(let n of e)n(t,i);return i}function e(t,e,i){let n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function i(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],l=e[7],c=e[8],f=e[9],d=e[10],g=e[11],p=e[12],m=e[13],w=e[14],_=e[15],k=i[0],v=i[1],x=i[2],y=i[3];return t[0]=k*n+v*h+x*c+y*p,t[1]=k*s+v*a+x*f+y*m,t[2]=k*r+v*u+x*d+y*w,t[3]=k*o+v*l+x*g+y*_,k=i[4],v=i[5],x=i[6],y=i[7],t[4]=k*n+v*h+x*c+y*p,t[5]=k*s+v*a+x*f+y*m,t[6]=k*r+v*u+x*d+y*w,t[7]=k*o+v*l+x*g+y*_,k=i[8],v=i[9],x=i[10],y=i[11],t[8]=k*n+v*h+x*c+y*p,t[9]=k*s+v*a+x*f+y*m,t[10]=k*r+v*u+x*d+y*w,t[11]=k*o+v*l+x*g+y*_,k=i[12],v=i[13],x=i[14],y=i[15],t[12]=k*n+v*h+x*c+y*p,t[13]=k*s+v*a+x*f+y*m,t[14]=k*r+v*u+x*d+y*w,t[15]=k*o+v*l+x*g+y*_,t}function n(t,e=[.9,.9,.9,1],i=16640){return(n,s)=>{n.i.o[s]|=1,n.i.h[s]={u:0,l:t,g:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m:[0,0,0],_:e,k:t.v,M:e,T:i}}}function s(t,e,i,n){let s=Math.sin(i),r=Math.cos(i);return t[0]=r*n[0],t[1]=s*n[0],t[2]=-s*n[1],t[3]=r*n[1],t[4]=e[0],t[5]=e[1],t}function r(t,e){return t[0]=e[4],t[1]=e[5],t}function o(t,e,i){let n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function h(t,e){return t[0]=e[0],t[1]=e[1],t}function a(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function u(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function l(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function c(t,e){let i=e[0],n=e[1],s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t}function f(t,e){return t[0]*e[0]+t[1]*e[1]}function d(t,e){let i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function g(t,e,i,n){u(G,i,e),u(H,n,e),u(J,n,i);let s=f(H,G);if(s<=0)s=0,h(t,e);else{let n=f(G,G);s>=n?(s=1,h(t,i)):(s/=n,l(t,G,s),a(t,t,e))}return s}function p(t,e){let i=t.i.C[e],n=t.i.F[e];i.I&&(n.I[0]=i.I[0],n.I[1]=i.I[1],t.i.o[e]|=128),i.P&&(n.P=i.P,t.i.o[e]|=128)}function m(t,e){let i=t.i.S[e];t.$.Mouse0>5&&(i.R[0]-=t.X.MouseX/t.Y,i.R[1]+=t.X.MouseY/t.Y,t.i.o[e]|=128)}function w(t,e,i,n){let s=~~(6*t),r=6*t-s,o=i*(1-e),h=i*(1-r*e),a=i*(1-(1-r)*e);switch(s%6){case 0:return[i,a,o,n];case 1:return[h,i,o,n];case 2:return[o,i,a,n];case 3:return[o,h,i,n];case 4:return[a,o,i,n];default:return[i,o,h,n]}}function _(){return((it=16807*it%2147483647)-1)/2147483646}function k(t=0,e=1){return~~(_()*(e-t+1)+t)}function v(t=0,e=1){return _()*(e-t)+t}function x(t){return t[k(0,t.length-1)]}function y(t){return(e,i)=>{e.i.o[i]|=32,e.i.A[i]={u:t}}}function M(t,e=[1,1,1,1]){let i="../assets/"+t+".png";return(t,n)=>{let s=n*Ct;t.D[s+6]=(n-0)/(t.i.V-0)*-1+1,t.D[s+7]=1,t.D[s+8]=e[0],t.D[s+9]=e[1],t.D[s+10]=e[2],t.D[s+11]=e[3],t.D[s+12]=vt[i].x,t.D[s+13]=vt[i].y,t.D[s+14]=vt[i].width,t.D[s+15]=vt[i].height,t.i.o[n]|=1024,t.i.K[n]={U:t.D.subarray(s+6,s+8),W:t.D.subarray(s+8,s+12),j:t.D.subarray(s+12,s+16)}}}function b(t){return(e,i)=>{e.D[i*Ct+6]=t}}function T(t,e){let i=t.i.A[e],n=t.i.L[e],s=t.i.N[e],r=t.i.S[e];if(0===n.O&&0===i.u&&(n.O=6),null===n.q)return;let o=t.i.B[n.q];if(2!==o.G)switch(s.H[0]=0,s.H[1]=0,i.u){case 0:if(4&o.G){M("ziemniak_surowy",w(v(0,.1),1,1,1))(t,e),r.P=x(xt),n.O&=-5,n.O|=8;break}if(8&o.G){M("ziemniak_obrany")(t,e),r.P=x(xt),n.O&=-9,n.O|=16;break}if(16&o.G){M("ziemniak_kawalek"+k(1,2))(t,e),r.J[0]=.5,r.J[1]=.5,r.P=x(xt),n.O&=-17,n.O|=1,n.Z=.5;break}}}function z(t,e,i){let n=t.i.S[e],s=t.i.F[e];if(s.I[0]||s.I[1]){yt[0]=s.I[0],yt[1]=s.I[1];let e=Math.min(1,Math.hypot((r=yt)[0],r[1]));(function(t,e,i){let n=e[0],s=e[1];t[0]=i[0]*n+i[2]*s,t[1]=i[1]*n+i[3]*s})(yt,yt,void 0!==n.tt?t.i.S[n.tt].et:n.i),c(yt,yt),l(yt,yt,e*s.it*i),a(n.R,n.R,yt),s.I[0]=0,s.I[1]=0}var r;s.P&&(n.P+=s.P*s.nt*i,s.P=0)}function C(t,e){return(i,n)=>{i.i.o[n]|=2048,i.i.N[n]={u:t,st:e,rt:[0,0],ot:[0,0],H:[0,0]}}}function F(t,e,i){let n=t.i.S[e],s=t.i.N[e];if(1===s.u){let e=-t.ht/t.Y/2,i=-t.ut/t.Y/2;n.R[1]<e&&(n.R[1]=e,s.H[0]=v(-3,3),s.H[1]*=v(-1,-.5)),n.R[0]<i&&(n.R[0]=i,s.H[0]*=-1),n.R[0]>-i&&(n.R[0]=-i,s.H[0]*=-1)}}function I(t,e,i){let n=t.i.S[e],s=t.i.N[e];if(1===s.u){h(s.ot,s.H),s.ot[1]+=-9.81*i,l(s.rt,s.rt,i),a(s.ot,s.ot,s.rt),l(s.ot,s.ot,s.st);let o=[0,0];l(o,s.ot,i),a(n.R,n.R,o),t.i.o[e]|=128,(r=s.rt)[0]=0,r[1]=0}var r}function P(t,e){let i=t.i.S[e],n=t.i.N[e],s=t.i.L[e];if(1===n.u)if(null!==s.q&&2048&t.i.o[s.q]){l(Mt,s.lt,s.ct),a(i.R,i.R,Mt),t.i.o[e]|=128;let r=t.i.N[s.q],o=f(n.ot,s.lt);l(bt,s.lt,-o*r.st),a(n.H,n.ot,bt)}else h(n.H,n.ot)}function S(t,e){let i=t.ft,n=t.dt["spritesheet.png"];t.gt.useProgram(i.wt),t.gt.uniformMatrix4fv(i._t.p,!1,e.p),t.gt.activeTexture(33984),t.gt.bindTexture(K,n.kt),t.gt.uniform1i(i._t.vt,0),t.gt.uniform2f(i._t.xt,n.yt,n.Mt),t.gt.bindBuffer(V,t.bt),t.gt.bufferData(V,t.D,35040),t.gt.drawArraysInstanced(i.Tt,0,4,t.i.o.length)}function $(t,e){for(let e=0;e<t.i.o.length;e++)4224==(4224&t.i.o[e])&&R(t.i,e,t.i.S[e])}function R(t,e,i){if(t.o[e]&=-129,s(i.i,i.R,i.P*Tt,i.J),void 0!==i.tt&&(function(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=i[0],l=i[1],c=i[2],f=i[3],d=i[4],g=i[5];t[0]=n*u+r*l,t[1]=s*u+o*l,t[2]=n*c+r*f,t[3]=s*c+o*f,t[4]=n*d+r*g+h,t[5]=s*d+o*g+a}(i.i,t.S[i.tt].i,i.i),i.Gyroscope&&(r(zt,i.i),s(i.i,zt,i.P*Tt,i.J))),function(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],h=e[5],a=i*r-n*s;a&&(a=1/a,t[0]=r*a,t[1]=-n*a,t[2]=-s*a,t[3]=i*a,t[4]=(s*h-r*o)*a,t[5]=(n*o-i*h)*a)}(i.et,i.i),64&t.o[e]){let i=t.zt[e];for(let n=0;n<i.zt.length;n++){let s=i.zt[n];if(4096&t.o[s]){let i=t.S[s];i.tt=e,R(t,s,i)}}}}function X(...e){return(i,n)=>{64&i.i.o[n]||(i.i.o[n]|=64,i.i.zt[n]={zt:[]});let s=i.i.zt[n].zt;for(let n of e){let e=t(i,n);s.push(e)}}}function Y(t,e){return(i,n)=>{i.i.o[n]|=2,i.i.L[n]={Ct:n,O:e,Z:t/2,Ft:[0,0],q:null,lt:[0,0],ct:0}}}function A(t,e,i=0){return(n,s)=>{n.i.o[s]|=4,n.i.B[s]={Ct:s,G:t,Z:e/2,It:i,Ft:[0,0],Pt:[0,0],St:[0,0]}}}function E(t=[0,0],e=0,i=[1,1]){return(n,s)=>{n.i.o[s]|=4224,n.i.S[s]={i:n.D.subarray(s*Ct,s*Ct+6),et:[1,0,0,1,0,0],R:t,P:e,J:i,Gyroscope:!1}}}var D=Object.defineProperty,V=34962,K=3553,U=5126,W=document.getElementById("update"),j=document.getElementById("delta"),L=document.getElementById("fps"),N=1/60,O=class extends class{constructor(t=1e4){this.o=[],this.$t=[],this.V=t}t(){return this.$t.length>0?this.$t.pop():this.o.push(0)-1}Rt(t){this.o[t]=0,this.$t.push(t)}}{constructor(){super(...arguments),this.h=[],this.L=[],this.B=[],this.C=[],this.Xt=[],this.A=[],this.zt=[],this.F=[],this.K=[],this.N=[],this.S=[]}},q=4098,B=[0,0],G=[0,0],H=[0,0],J=[0,0],Q=0,Z=[0,0],tt=[0,0],et=[0,0],it=1,nt={};((t,e)=>{for(var i in e)D(t,i,{get:e[i],enumerable:!0})})(nt,{"../assets/garnek11.png":()=>st,"../assets/garnek12.png":()=>rt,"../assets/garnek13.png":()=>ot,"../assets/garnek14.png":()=>ht,"../assets/garnek21.png":()=>at,"../assets/garnek22.png":()=>ut,"../assets/garnek23.png":()=>lt,"../assets/garnek24.png":()=>ct,"../assets/garnek2_front.png":()=>ft,"../assets/platform1.png":()=>dt,"../assets/sloik.png":()=>gt,"../assets/ziemniak_kawalek1.png":()=>pt,"../assets/ziemniak_kawalek2.png":()=>mt,"../assets/ziemniak_obrany.png":()=>wt,"../assets/ziemniak_surowy.png":()=>_t,default:()=>kt});var st={x:0,y:0,width:128,height:96},rt={x:128,y:0,width:128,height:96},ot={x:0,y:96,width:128,height:96},ht={x:128,y:96,width:128,height:96},at={x:256,y:0,width:128,height:96},ut={x:256,y:96,width:128,height:96},lt={x:0,y:192,width:128,height:96},ct={x:128,y:192,width:128,height:96},ft={x:256,y:192,width:128,height:96},dt={x:0,y:288,width:128,height:32},gt={x:0,y:320,width:64,height:64},pt={x:192,y:288,width:16,height:16},mt={x:208,y:288,width:16,height:16},wt={x:128,y:288,width:32,height:32},_t={x:160,y:288,width:32,height:32},kt={"../assets/garnek11.png":st,"../assets/garnek12.png":rt,"../assets/garnek13.png":ot,"../assets/garnek14.png":ht,"../assets/garnek21.png":at,"../assets/garnek22.png":ut,"../assets/garnek23.png":lt,"../assets/garnek24.png":ct,"../assets/garnek2_front.png":ft,"../assets/platform1.png":dt,"../assets/sloik.png":gt,"../assets/ziemniak_kawalek1.png":pt,"../assets/ziemniak_kawalek2.png":mt,"../assets/ziemniak_obrany.png":wt,"../assets/ziemniak_surowy.png":_t},vt=nt,xt=[0,90,180,270],yt=[0,0],Mt=[0,0],bt=[0,0],Tt=Math.PI/180,zt=[0,0],Ct=16,Ft=4*Ct,It=Float32Array.from([-.5,-.5,0,0,1,.5,-.5,0,1,1,-.5,.5,0,0,0,.5,.5,0,1,0]),Pt=new class extends class extends class{constructor(){this.Yt=0,this.At=0,this.ut=window.innerWidth,this.ht=window.innerHeight,this.Et=!0,this.Dt={MouseX:0,MouseY:0},this.X={MouseX:0,MouseY:0,WheelY:0},this.$={Mouse:0,Mouse0:0,Mouse1:0,Mouse2:0,Touch0:0,Touch1:0},this.Vt={},this.Kt=document.querySelector("main"),document.addEventListener("visibilitychange",(()=>document.hidden?this.Ut():this.Wt())),this.Kt.addEventListener("contextmenu",(t=>t.preventDefault())),this.Kt.addEventListener("mousedown",(t=>{this.Dt["Mouse"+t.button]=1,this.X["Mouse"+t.button]=1})),this.Kt.addEventListener("mouseup",(t=>{this.Dt["Mouse"+t.button]=0,this.X["Mouse"+t.button]=-1})),this.Kt.addEventListener("mousemove",(t=>{this.X.MouseX=t.clientX-this.Dt.MouseX,this.X.MouseY=t.clientY-this.Dt.MouseY,this.Dt.MouseX=t.clientX,this.Dt.MouseY=t.clientY})),this.Kt.addEventListener("wheel",(t=>{t.preventDefault(),this.X.WheelY=t.deltaY})),this.Kt.addEventListener("touchstart",(t=>{t.target===this.Kt&&t.preventDefault(),1===t.touches.length&&(this.Vt={});for(let e=0;e<t.touches.length;e++)this.Vt[t.touches[e].identifier]=e;for(let e=0;e<t.changedTouches.length;e++){let i=t.changedTouches[e],n=this.Vt[i.identifier];this.Dt["Touch"+n]=1,this.Dt[`Touch${n}X`]=i.clientX,this.Dt[`Touch${n}Y`]=i.clientY,this.X["Touch"+n]=1,this.X[`Touch${n}X`]=0,this.X[`Touch${n}Y`]=0}})),this.Kt.addEventListener("touchmove",(t=>{t.target===this.Kt&&t.preventDefault();for(let e=0;e<t.changedTouches.length;e++){let i=t.changedTouches[e],n=this.Vt[i.identifier];this.X[`Touch${n}X`]=i.clientX-this.Dt[`Touch${n}X`],this.X[`Touch${n}Y`]=i.clientY-this.Dt[`Touch${n}Y`],this.Dt[`Touch${n}X`]=i.clientX,this.Dt[`Touch${n}Y`]=i.clientY}})),this.Kt.addEventListener("touchend",(t=>{t.target===this.Kt&&t.preventDefault();for(let e=0;e<t.changedTouches.length;e++){let i=this.Vt[t.changedTouches[e].identifier];this.Dt["Touch"+i]=0,this.X["Touch"+i]=-1}})),this.Kt.addEventListener("touchcancel",(t=>{for(let e=0;e<t.changedTouches.length;e++){let i=this.Vt[t.changedTouches[e].identifier];this.Dt["Touch"+i]=0,this.X["Touch"+i]=-1}})),window.addEventListener("keydown",(t=>{t.repeat||(this.Dt[t.code]=1,this.X[t.code]=1)})),window.addEventListener("keyup",(t=>{this.Dt[t.code]=0,this.X[t.code]=-1}))}Wt(){let t=0,e=performance.now(),i=n=>{let s=(n-e)/1e3;for(e=n,this.Yt=requestAnimationFrame(i),this.jt(s),t+=s;t>=N;)t-=N,this.Lt(N),this.Nt();this.Ot(s),this.qt(s)};this.Ut(),i(e)}Ut(){cancelAnimationFrame(this.Yt),this.Yt=0}jt(t){this.At=performance.now();let e=Math.abs(this.X.MouseX)+Math.abs(this.X.MouseY);this.$.Mouse+=e,1===this.Dt.Mouse0&&(this.$.Mouse0+=e),1===this.Dt.Mouse1&&(this.$.Mouse1+=e),1===this.Dt.Mouse2&&(this.$.Mouse2+=e),1===this.Dt.Touch0&&(this.$.Touch0+=Math.abs(this.X.Touch0X)+Math.abs(this.X.Touch0Y)),1===this.Dt.Touch1&&(this.$.Touch1+=Math.abs(this.X.Touch1X)+Math.abs(this.X.Touch1Y))}Lt(t){}Ot(t){}Nt(){-1===this.X.Mouse0&&(this.$.Mouse0=0),-1===this.X.Mouse1&&(this.$.Mouse1=0),-1===this.X.Mouse2&&(this.$.Mouse2=0),-1===this.X.Touch0&&(this.$.Touch0=0),-1===this.X.Touch1&&(this.$.Touch1=0);for(let t in this.X)this.X[t]=0}qt(t){this.Et=!1;let e=performance.now()-this.At;W&&(W.textContent=e.toFixed(1)),j&&(j.textContent=(1e3*t).toFixed(1)),L&&(L.textContent=(1/t).toFixed())}}{constructor(){super(),this.Bt=document.querySelector("#billboard"),this.Gt=this.Bt.getContext("2d"),this.Ht=document.querySelector("#scene"),this.gt=this.Ht.getContext("webgl2"),this.Audio=new AudioContext,this.Jt=[],this.Qt={},this.gt.enable(2929),this.gt.enable(2884),this.gt.blendFunc(770,771)}}{constructor(){super(),this.i=new O(50100),this.ft=function(t){let i=function(t,i,n){let s=t.createProgram();return t.attachShader(s,e(t,35633,"#version 300 es\n\nuniform mat4 pv;\nuniform vec2 sheet_size;\n\n\nin vec4 attr_position;\nin vec2 attr_texcoord;\n\n\nin vec4 attr_rotation; \nin vec4 attr_translation; \nin vec4 attr_color;\nin vec4 attr_sprite;\n\nout vec2 vert_texcoord;\nout vec4 vert_color;\nout vec4 vert_sprite;\n\nvoid main() {\nmat4 world = mat4(\nattr_rotation.xy, 0, 0,\nattr_rotation.zw, 0, 0,\n0, 0, 1, 0,\nattr_translation.xyz, 1\n);\n\nvec4 world_position = world * attr_position;\ngl_Position = pv * world_position;\nif (attr_translation.w == 0.0) {\ngl_Position.z = 2.0;\n}\n\n\n\nvert_texcoord = (attr_sprite.xy + attr_sprite.zw * attr_texcoord) / sheet_size;\nvert_texcoord.y *= -1.0;\nvert_color = attr_color;\n}\n")),t.attachShader(s,e(t,35632,"#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D sheet_texture;\n\nin vec2 vert_texcoord;\nin vec4 vert_color;\n\nout vec4 frag_color;\n\nvoid main() {\nfrag_color = vert_color * texture(sheet_texture, vert_texcoord);\nif (frag_color.a == 0.0) {\ndiscard;\n}\n}\n")),t.linkProgram(s),s}(t);return{Tt:5,wt:i,_t:{p:t.getUniformLocation(i,"pv"),i:t.getUniformLocation(i,"world"),vt:t.getUniformLocation(i,"sheet_texture"),xt:t.getUniformLocation(i,"sheet_size"),Zt:t.getAttribLocation(i,"attr_position"),te:t.getAttribLocation(i,"attr_texcoord"),ee:t.getAttribLocation(i,"attr_rotation"),ie:t.getAttribLocation(i,"attr_translation"),ne:t.getAttribLocation(i,"attr_color"),se:t.getAttribLocation(i,"attr_sprite")}}}(this.gt),this.dt={},this.Y=32,this.re=null,this.oe=null,this.D=new Float32Array(this.i.V*Ct),this.bt=this.gt.createBuffer(),this.gt.pixelStorei(37440,!0);let t=this.ft,i=this.gt.createBuffer();this.gt.bindBuffer(V,i),this.gt.bufferData(V,It,35044),this.gt.enableVertexAttribArray(t._t.Zt),this.gt.vertexAttribPointer(t._t.Zt,3,U,!1,20,0),this.gt.enableVertexAttribArray(t._t.te),this.gt.vertexAttribPointer(t._t.te,2,U,!1,20,12),this.gt.bindBuffer(V,this.bt),this.gt.bufferData(V,this.i.V*Ft,35040),this.gt.enableVertexAttribArray(t._t.ee),this.gt.vertexAttribDivisor(t._t.ee,1),this.gt.vertexAttribPointer(t._t.ee,4,U,!1,Ft,0),this.gt.enableVertexAttribArray(t._t.ie),this.gt.vertexAttribDivisor(t._t.ie,1),this.gt.vertexAttribPointer(t._t.ie,4,U,!1,Ft,16),this.gt.enableVertexAttribArray(t._t.ne),this.gt.vertexAttribDivisor(t._t.ne,1),this.gt.vertexAttribPointer(t._t.ne,4,U,!1,Ft,32),this.gt.enableVertexAttribArray(t._t.se),this.gt.vertexAttribDivisor(t._t.se,1),this.gt.vertexAttribPointer(t._t.se,4,U,!1,Ft,48)}Lt(t){!function(t,e){let i=t.Jt[0];if(void 0===i)return;let n=t.i.h[i];if(2===n.u)throw Error("XR not implemented");let s=[t.Dt.MouseX/t.ut*2-1,-t.Dt.MouseY/t.ht*2+1,0];if(function(t,e,i){let n=e[0],s=e[1],r=e[2],o=i[3]*n+i[7]*s+i[11]*r+i[15]||1;t[0]=(i[0]*n+i[4]*s+i[8]*r+i[12])/o,t[1]=(i[1]*n+i[5]*s+i[9]*r+i[13])/o,t[2]=(i[2]*n+i[6]*s+i[10]*r+i[14])/o}(s,s,n.l.he),o(Z,[s[0],s[1]],t.i.S[i].i),null!==t.oe){if(-1===t.X.Mouse0)return document.body.classList.remove("grabbing"),void(t.oe=null);let e=t.i.S[t.oe];return h(e.R,Z),u(e.R,e.R,tt),void(t.i.o[t.oe]|=128)}t.re=null;for(let e=0;e<t.i.o.length;e++)if(4352==(4352&t.i.o[e])&&(a=Z,r(et,t.i.S[e].i),d(a,et)<2.9)){if(t.re=e,document.body.classList.add("grab"),1===t.X.Mouse0&&(document.body.classList.add("grabbing"),t.oe=e,u(tt,Z,t.i.S[e].R)),t.X.WheelY){let i=t.i.S[e];i.P-=.1*t.X.WheelY,i.P%=360,t.i.o[e]|=128}return}var a;document.body.classList.remove("grab")}(this),function(t,e){if(null===t.re&&t.X.WheelY){let e=4**((Q=Math.max(-500,Math.min(500,Q+t.X.WheelY)))/-500);.9<e&&e<1.1&&(e=1),t.Y=32*e,t.Et=!0}if(null===t.oe&&(1===t.X.Mouse0?document.body.classList.add("grabbing"):-1===t.X.Mouse0&&document.body.classList.remove("grabbing"),t.$.Mouse0>5))for(let e=0;e<t.i.o.length;e++)17==(17&t.i.o[e])&&m(t,e)}(this),function(t,e){for(let e=0;e<t.i.o.length;e++)6144==(6144&t.i.o[e])&&F(t,e)}(this),function(t,e){for(let i=0;i<t.i.o.length;i++)6144==(6144&t.i.o[i])&&I(t,i,e)}(this,t),$(this),function(t,e){for(let e=0;e<t.i.o.length;e++)if((t.i.o[e]&q)===q){let i=t.i.L[e];r(i.Ft,t.i.S[e].i),i.q=null}for(let e=0;e<t.i.o.length;e++)if(4100==(4100&t.i.o[e])){let s=t.i.S[e],h=t.i.B[e];r(h.Ft,s.i),h.It>0?(o(h.St,[0,-h.It/2],s.i),o(h.Pt,[0,h.It/2],s.i)):(o(h.St,[h.It/2,0],s.i),o(h.Pt,[-h.It/2,0],s.i));for(let s=0;s<t.i.o.length;s++)if((t.i.o[s]&q)===q){let r=t.i.L[s];r.O&h.G&&(g(B,h.St,h.Pt,r.Ft),d(B,r.Ft)<(h.Z+r.Z)**2&&(r.q=e,u(r.lt,r.Ft,B),c(r.lt,r.lt),r.ct=h.Z+r.Z-Math.hypot((n=r.Ft)[0]-(i=B)[0],n[1]-i[1])))}}var i,n}(this),function(t,e){for(let e=0;e<t.i.o.length;e++)6146==(6146&t.i.o[e])&&P(t,e)}(this),$(this),function(t,e){for(let e=0;e<t.i.o.length;e++)34==(34&t.i.o[e])&&T(t,e)}(this)}Ot(t){!function(t,e){for(let e=0;e<t.i.o.length;e++)520==(520&t.i.o[e])&&p(t,e)}(this),function(t,e){for(let i=0;i<t.i.o.length;i++)4736==(4736&t.i.o[i])&&z(t,i,e)}(this,t),function(t,e){if(t.ut==window.innerWidth&&t.ht==window.innerHeight||(t.Et=!0),t.Et){t.ut=t.Ht.width=t.Bt.width=window.innerWidth,t.ht=t.Ht.height=t.Bt.height=window.innerHeight;for(let e=0;e<t.i.o.length;e++)if(1==(1&t.i.o[e])){let s=t.i.h[e];if(0==s.u&&1==s.l.u){s.l.Z=t.ht/t.Y/2,function(t,e,i,n,s,r,o){let h=1/(s-i),a=1/(n-e),u=1/(r-o);t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*h,t[13]=(e+n)*a,t[14]=(o+r)*u,t[15]=1}((i=s.l).l,i.Z,i.Z*(n=t.ut/t.ht),-i.Z,-i.Z*n,i.ae,i.v),function(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],h=e[5],a=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],g=e[12],p=e[13],m=e[14],w=e[15],_=i*h-n*o,k=i*a-s*o,v=i*u-r*o,x=n*a-s*h,y=n*u-r*h,M=s*u-r*a,b=l*p-c*g,T=l*m-f*g,z=l*w-d*g,C=c*m-f*p,F=c*w-d*p,I=f*w-d*m,P=_*I-k*F+v*C+x*z-y*T+M*b;P&&(P=1/P,t[0]=(h*I-a*F+u*C)*P,t[1]=(s*F-n*I-r*C)*P,t[2]=(p*M-m*y+w*x)*P,t[3]=(f*y-c*M-d*x)*P,t[4]=(a*z-o*I-u*T)*P,t[5]=(i*I-s*z+r*T)*P,t[6]=(m*v-g*M-w*k)*P,t[7]=(l*M-f*v+d*k)*P,t[8]=(o*F-h*z+u*b)*P,t[9]=(n*z-i*F-r*b)*P,t[10]=(g*y-p*v+w*_)*P,t[11]=(c*v-l*y-d*_)*P,t[12]=(h*T-o*C-a*b)*P,t[13]=(i*C-n*T+s*b)*P,t[14]=(p*k-g*x-m*_)*P,t[15]=(l*x-c*k+f*_)*P)}(i.he,i.l);break}}}var i,n}(this),function(t,e){t.Jt=[];for(let e=0;e<t.i.o.length;e++)if(4097==(4097&t.i.o[e])){let n=t.i.h[e];if(0!==n.u)throw Error("Only canvas cameras are supported.");let s=n.l,r=t.i.S[e];n.g[0]=r.et[0],n.g[1]=r.et[1],n.g[4]=r.et[2],n.g[5]=r.et[3],n.g[12]=r.et[4],n.g[13]=r.et[5],n.g[14]=-2,i(n.p,s.l,n.g),n.m[0]=r.i[4],n.m[1]=r.i[5],n.m[2]=2,t.Jt.push(e)}}(this),function(t,e){for(let e=0;e<t.i.o.length;e++){let i=e*Ct+7;1024&t.i.o[e]?0==t.D[i]&&(t.D[i]=1):1==t.D[i]&&(t.D[i]=0)}for(let e of t.Jt){let i=t.i.h[e];0===i.u&&(t.gt.bindFramebuffer(36160,null),t.gt.viewport(0,0,t.ut,t.ht),t.gt.clearColor(...i.M),t.gt.clear(i.T),S(t,i))}}(this)}};window.game=Pt,Promise.all([async function(t,e){let i=await new Promise((t=>{let e=new Image;e.src="../textures/spritesheet.png.webp",e.onload=()=>t(e)}));t.dt[e]=function(t,e){let i=t.createTexture();return t.bindTexture(K,i),t.texImage2D(K,0,6408,6408,5121,e),t.texParameteri(K,10241,9728),t.texParameteri(K,10240,9728),t.texParameteri(K,10242,10497),t.texParameteri(K,10243,10497),{kt:i,yt:e.width,Mt:e.height}}(t.gt,i)}(Pt,"spritesheet.png")]).then((()=>{!function(e){e.i=new O(50100),e.Et=!0,t(e,[E([0,0]),n({u:1,Z:5,ae:1,v:3,l:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],he:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),(t,e)=>{t.i.o[e]|=16,t.i.Xt[e]={}}]),t(e,[E([0,5],0,[4,3]),M("garnek2_front"),b(1),A(4,1),(t,e)=>{t.i.o[e]|=256},X([E(),M("garnek21"),b(0)],[E([-.3,0]),A(2,.3,.25),C(0,1)],[E([.3,0]),A(2,.3,.25),C(0,1)])]),t(e,[E([0,0],0,[4,3]),M("garnek2_front"),b(1),A(8,1),(t,e)=>{t.i.o[e]|=256},X([E(),M("garnek21"),b(0)],[E([-.3,0]),A(2,.3,.25),C(0,1)],[E([.3,0]),A(2,.3,.25),C(0,1)])]),t(e,[E([0,-5],0,[4,3]),M("garnek2_front"),b(1),A(16,1),(t,e)=>{t.i.o[e]|=256},X([E(),M("garnek21"),b(0)],[E([-.3,0]),A(2,.3,.25),C(0,1)],[E([.3,0]),A(2,.3,.25),C(0,1)])]),t(e,[E([-2.5,10],-45,[4,1]),M("platform1"),A(2,1,-.65),C(0,1.3),(t,e)=>{t.i.o[e]|=256}]),t(e,[E([2.5,10],45,[4,1]),M("platform1"),A(2,1,-.65),C(0,1.3),(t,e)=>{t.i.o[e]|=256}]);for(let i=0;i<1e4;i++)t(e,[E([v(-3,3),v(20,100)],0),M("ziemniak_surowy",w(v(.1,.15),v(0,.5),v(.5,1),1)),y(0),Y(1,0),C(1,v(.99,.999))])}(Pt),Pt.Wt()}))})();
